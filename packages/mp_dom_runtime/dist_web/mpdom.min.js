!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MPDOM=t()}}(function(){var define,module,exports;return function r(s,a,l){function c(e,t){if(!a[e]){if(!s[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(u)return u(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var n=a[e]={exports:{}};s[e][0].call(n.exports,function(t){return c(s[e][1][t]||t)},n,n.exports,r,s,a,l)}return a[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(t,e,o){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},l=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,n)}r((l=l.apply(t,s||[])).next())})},c=this&&this.__generator||function(o,i){var n,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(o,a)}catch(t){e=[6,t],r=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.WXApp=o.BrowserApp=void 0;var u=t("./page"),i=t("./router"),n=(r.prototype.setupPageScrollListener=function(){var o=this;document.addEventListener("scroll",function(){var t;if(document.documentElement.scrollHeight>innerHeight&&window.pageYOffset+innerHeight>=document.documentElement.scrollHeight){var e=(null===(t=o.engine.app)||void 0===t?void 0:t.router).history;e[e.length-1].item.onReachBottom()}})},r.prototype.getURLSearchParams=function(){try{for(var t={},e=new URL(window.location.href).searchParams,o=e.keys(),i=o.next();!i.done&&(t[i.value]=e.get(i.value),!(i=o.next()).done););return t}catch(t){return console.error(t),{}}},r.prototype.setupFirstPage=function(i,n){var r,s;return l(this,void 0,void 0,function(){var e,o;return c(this,function(t){switch(t.label){case 0:return i=i||(this.router.isPathRewriteEnabled?{route:new URL(window.location.href).pathname||"/",params:this.getURLSearchParams()}:(delete(e=a({},this.getURLSearchParams())).route,{route:new URL(window.location.href).searchParams.get("route")||"/",params:e})),(o=new u.Page(this.rootElement,this.engine,i)).isFirst=!0,n?(this.router.history.forEach(function(t){return t.item.active=!1}),this.router.history[0]={item:o,scrollPosition:0}):this.router.history.push({item:o,scrollPosition:0}),[4,o.ready()];case 1:return t.sent(),this.router.didSetupFirst(o.viewId,null!==(r=null==i?void 0:i.route)&&void 0!==r?r:"/",null!==(s=null==i?void 0:i.params)&&void 0!==s?s:{}),[2]}})})},r.prototype.enablePathRewrite=function(){this.router.isPathRewriteEnabled=!0},r);function r(t,e){this.rootElement=t,this.engine=e,this.router=new i.BrowserRouter(this.engine),(e.app=this).setupPageScrollListener()}o.BrowserApp=n;function s(t,e){this.indexPage=t,this.engine=e,this.router=new i.WXRouter(this.engine),e.app=this}o.WXApp=s},{"./page":43,"./router":44}],2:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.AbsorbPointer=void 0;var r,s=t("../../env"),a=t("../component_view"),l=(r=a.ComponentView,n(c,r),c.prototype.elementType=function(){return s.MPEnv.platformType==s.PlatformType.wxMiniProgram?"catchclick":"div"},c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),this.htmlElement.onclick=function(t){t&&t.stopPropagation()}},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.AbsorbPointer=l},{"../../env":39,"../component_view":26}],3:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ClipOval=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=(r=s.ComponentView,n(c,r),c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),a.setDOMStyle(this.htmlElement,{borderRadius:"50%",overflow:"hidden"})},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.ClipOval=l},{"../component_view":26,"../dom_utils":27}],4:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ClipRRectAncestor=o.ClipRRect=void 0;var a,r=t("../component_view"),l=t("../dom_utils"),c=t("../utils"),s=(a=r.ComponentView,n(u,a),u.prototype.setAttributes=function(t){var e,o,i,n,r;a.prototype.setAttributes.call(this,t);var s=t.borderRadius?c.cssBorderRadius(t.borderRadius):{};s.borderRadius?l.setDOMStyle(this.htmlElement,{borderRadius:null!==(e=s.borderRadius)&&void 0!==e?e:"unset",overflow:"hidden"}):l.setDOMStyle(this.htmlElement,{borderTopLeftRadius:null!==(o=s.borderTopLeftRadius)&&void 0!==o?o:"unset",borderTopRightRadius:null!==(i=s.borderTopRightRadius)&&void 0!==i?i:"unset",borderBottomLeftRadius:null!==(n=s.borderBottomLeftRadius)&&void 0!==n?n:"unset",borderBottomRightRadius:null!==(r=s.borderBottomRightRadius)&&void 0!==r?r:"unset",overflow:"hidden"})},u);function u(){return null!==a&&a.apply(this,arguments)||this}o.ClipRRect=s;var p,d=(p=r.AncestorView,n(h,p),h.prototype.setAttributes=function(t){var e,o,i,n,r;p.prototype.setAttributes.call(this,t),this.target.ancestorStyle.opacity||(this.target.ancestorStyle.opacity=1);var s=t.borderRadius?c.cssBorderRadius(t.borderRadius):{};s.borderRadius?this.target.ancestorStyle.borderRadius=null!==(e=s.borderRadius)&&void 0!==e?e:"unset":(this.target.ancestorStyle.borderTopLeftRadius=null!==(o=s.borderTopLeftRadius)&&void 0!==o?o:"unset",this.target.ancestorStyle.borderTopRightRadius=null!==(i=s.borderTopRightRadius)&&void 0!==i?i:"unset",this.target.ancestorStyle.borderBottomLeftRadius=null!==(n=s.borderBottomLeftRadius)&&void 0!==n?n:"unset",this.target.ancestorStyle.borderBottomRightRadius=null!==(r=s.borderBottomRightRadius)&&void 0!==r?r:"unset"),this.target.ancestorStyle.overflow="hidden"},h);function h(){return null!==p&&p.apply(this,arguments)||this}o.ClipRRectAncestor=d},{"../component_view":26,"../dom_utils":27,"../utils":34}],5:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.CollectionViewLayout=o.CollectionView=void 0;var r,s=t("../component_view"),u=t("../dom_utils"),p=t("./sliver_persistent_header"),a=(r=s.ComponentView,n(l,r),l.prototype.setConstraints=function(t){r.prototype.setConstraints.call(this,t),this.viewWidth===t.w&&this.viewHeight===t.h||(this.viewWidth=t.w,this.viewHeight=t.h,this.reloadLayouts())},l.prototype.reloadLayouts=function(){var t,e,o,i;this.layout.prepareLayout();for(var n=0,r=0,s=0;s<this.subviews.length;s++){var a=this.subviews[s],l=this.layout.layoutAttributesForItemAtIndex(s);u.setDOMStyle(a.htmlElement,{position:"absolute",top:l.y.toFixed(1)+"px",left:l.x.toFixed(1)+"px",width:l.width.toFixed(1)+"px",height:l.height.toFixed(1)+"px"}),a instanceof p.SliverPersistentHeader&&(a.y=l.y-n,a.h=r,n+=a.y+(null!==(e=null===(t=a.constraints)||void 0===t?void 0:t.h)&&void 0!==e?e:0),r+=null!==(i=null===(o=a.constraints)||void 0===o?void 0:o.h)&&void 0!==i?i:0,a.updateLayout())}var c=this.layout.collectionViewContentSize();u.setDOMStyle(this.wrapperHtmlElement,{position:"absolute",top:"0px",left:"0px",width:c.width+"px",height:c.height+"px"})},l.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),u.setDOMStyle(this.htmlElement,{overflow:t.isRoot?"unset":"scroll"})},l.prototype.addSubview=function(t){t.superview&&t.removeFromSuperview(),this.subviews.push(t),(t.superview=this).wrapperHtmlElement.appendChild(t.htmlElement)},l);function l(t){var e=r.call(this,t)||this;return e.wrapperHtmlElement=e.document.createElement("div"),e.viewWidth=0,e.viewHeight=0,e.htmlElement.appendChild(e.wrapperHtmlElement),e}o.CollectionView=a;var c=(d.prototype.prepareLayout=function(){},d.prototype.layoutAttributesForItemAtIndex=function(t){throw""},d.prototype.collectionViewContentSize=function(){throw""},d);function d(t){this.collectionView=t}o.CollectionViewLayout=c},{"../component_view":26,"../dom_utils":27,"./sliver_persistent_header":21}],6:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ColoredBox=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=t("../utils"),c=(r=s.ComponentView,n(u,r),u.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),a.setDOMStyle(this.htmlElement,{backgroundColor:t.color?l.cssColor(t.color):"unset"})},u);function u(){return null!==r&&r.apply(this,arguments)||this}o.ColoredBox=c},{"../component_view":26,"../dom_utils":27,"../utils":34}],7:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,n)}r((l=l.apply(t,s||[])).next())})},a=this&&this.__generator||function(o,i){var n,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(o,a)}catch(t){e=[6,t],r=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.CustomPaint=o.MPDrawable=void 0;var l=t("../../env"),r=t("../component_view"),c=t("../dom_utils"),u=t("../utils"),p=(d.prototype.decodeDrawable=function(i){return s(this,void 0,void 0,function(){var e,o;return a(this,function(t){switch(t.label){case 0:l.MPEnv.platformType===l.PlatformType.wxMiniProgram&&(d.offscreenCanvas||(d.offscreenCanvas=wx.createOffscreenCanvas())),t.label=1;case 1:return t.trys.push([1,7,,8]),"networkImage"!==i.type?[3,3]:[4,this.decodeNetworkImage(i.url,i.target)];case 2:return e=t.sent(),this.engine.sendMessage(JSON.stringify({type:"decode_drawable",message:{event:"onDecode",target:i.target,width:e.width,height:e.height}})),[3,6];case 3:return"memoryImage"!==i.type?[3,5]:[4,this.decodeMemoryImage(i.data,i.target)];case 4:return e=t.sent(),this.engine.sendMessage(JSON.stringify({type:"decode_drawable",message:{event:"onDecode",target:i.target,width:e.width,height:e.height}})),[3,6];case 5:throw new Error("Unknown drawable type.");case 6:return[3,8];case 7:return o=t.sent(),this.engine.sendMessage(JSON.stringify({type:"decode_drawable",message:{event:"onError",target:i.target,error:null==o?void 0:o.toString()}})),[3,8];case 8:return[2]}})})},d.prototype.decodeNetworkImage=function(n,r){return s(this,void 0,void 0,function(){var i=this;return a(this,function(t){return[2,new Promise(function(t,e){var o=l.MPEnv.platformType===l.PlatformType.wxMiniProgram?d.offscreenCanvas.createImage():document.createElement("img");o.onload=function(){i.decodedDrawables[r]=o,t({width:o.width,height:o.height})},o.onerror=function(){e("")},o.src=n})]})})},d.prototype.decodeMemoryImage=function(n,r){return s(this,void 0,void 0,function(){var i=this;return a(this,function(t){return[2,new Promise(function(t,e){var o=l.MPEnv.platformType===l.PlatformType.wxMiniProgram?d.offscreenCanvas.createImage():document.createElement("img");o.onload=function(){i.decodedDrawables[r]=o,t({width:o.width,height:o.height})},o.onerror=function(){e("")},o.src="data:text/plain;base64,"+n})]})})},d);function d(t){this.engine=t,this.decodedDrawables={}}o.MPDrawable=p;var h,f=(h=r.ComponentView,n(m,h),m.prototype.elementType=function(){return"canvas"},m.prototype.setConstraints=function(t){if(t){var e=t.x,o=t.y,i=t.w,n=t.h;"number"==typeof e&&"number"==typeof o&&"number"==typeof i&&"number"==typeof n&&(c.setDOMStyle(this.htmlElement,{left:e+"px",top:o+"px",width:i+"px",height:n+"px"}),this.canvasWidth===i&&this.canvasHeight==n||(this.canvasWidth=i,this.canvasHeight=n,c.setDOMAttribute(this.htmlElement,"width",this.canvasWidth.toString()),c.setDOMAttribute(this.htmlElement,"height",this.canvasHeight.toString())))}},m.prototype.createContext=function(){return s(this,void 0,void 0,function(){var e=this;return a(this,function(t){return l.MPEnv.platformType===l.PlatformType.wxMiniProgram?[2,new Promise(function(r){setTimeout(function(){return s(e,void 0,void 0,function(){var e,o,i,n;return a(this,function(t){switch(t.label){case 0:return[4,this.htmlElement.getFields({node:!0,size:!0})];case 1:return e=t.sent(),o=e.node,i=o.getContext("2d"),n=wx.getSystemInfoSync().pixelRatio,o.width=e.width*n,o.height=e.height*n,i.scale(n,n),r(i),[2]}})})},16)})]:[2,this.htmlElement.getContext("2d")]})})},m.prototype.setAttributes=function(n){var r;return s(this,void 0,void 0,function(){var e,o,i=this;return a(this,function(t){switch(t.label){case 0:return h.prototype.setAttributes.call(this,n),null===(r=this.ctx)||void 0===r?[3,1]:(o=r,[3,3]);case 1:return[4,this.createContext()];case 2:o=t.sent(),t.label=3;case 3:return(e=o)&&(this.ctx||(this.ctx=e),e.save(),n.commands.forEach(function(t){"drawRect"===t.action?i.drawRect(e,t):"drawPath"===t.action?i.drawPath(e,t):"drawDRRect"===t.action?i.drawDRRect(e,t):"clipPath"===t.action?i.drawPath(e,t):"drawColor"===t.action?i.drawColor(e,t):"drawImage"===t.action?i.drawImage(e,t):"drawImageRect"===t.action?i.drawImageRect(e,t):"restore"===t.action?e.restore():"rotate"===t.action?e.rotate(t.radians):"save"===t.action?e.save():"scale"===t.action?e.scale(t.sx,t.sy):"skew"===t.action?e.transform(1,t.sy,t.sx,1,0,0):"transform"===t.action?e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty):"translate"===t.action&&e.translate(t.dx,t.dy)}),e.restore()),[2]}})})},m.prototype.drawRect=function(t,e){this.setPaint(t,e.paint),"PaintingStyle.fill"===e.paint.style?t.fillRect(e.x,e.y,e.width,e.height):t.strokeRect(e.x,e.y,e.width,e.height)},m.prototype.drawPath=function(t,e){this.setPaint(t,e.paint),this.drawRealPath(t,e.path),"clipPath"===e.action?t.clip():"PaintingStyle.fill"===e.paint.style?t.fill():t.stroke()},m.prototype.drawDRRect=function(t,e){var o=document.createElement("canvas");o.width=t.canvas.width,o.height=t.canvas.height;var i=o.getContext("2d");this.setPaint(i,e.paint),this.drawRealPath(i,e.outer),"PaintingStyle.fill"===e.paint.style?i.fill():i.stroke(),i.save(),i.fillStyle="white",i.globalCompositeOperation="xor",this.drawRealPath(i,e.inner),i.fill(),i.restore(),t.drawImage(o,0,0)},m.prototype.drawRealPath=function(e,t){e.beginPath(),t.commands.forEach(function(t){"moveTo"===t.action?e.moveTo(t.x,t.y):"lineTo"===t.action?e.lineTo(t.x,t.y):"quadraticBezierTo"===t.action?e.quadraticCurveTo(t.x1,t.y1,t.x2,t.y2):"cubicTo"===t.action?e.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3):"arcTo"===t.action?e.ellipse(t.x,t.y,t.width/2,t.height/2,0,t.startAngle,t.startAngle+t.sweepAngle,t.sweepAngle<0):"arcToPoint"===t.action?e.arcTo(t.arcControlX,t.arcControlY,t.arcEndX,t.arcEndY,t.radiusX):"close"===t.action&&e.closePath()})},m.prototype.drawColor=function(t,e){"BlendMode.clear"===e.blendMode?t.clearRect(0,0,t.canvas.width,t.canvas.height):(t.fillStyle=u.cssColor(e.color),t.fillRect(0,0,t.canvas.width,t.canvas.height))},m.prototype.drawImage=function(t,e){this.setPaint(t,e.paint);var o=this.engine.drawable.decodedDrawables[e.drawable];o&&t.drawImage(o,e.dx,e.dy)},m.prototype.drawImageRect=function(t,e){this.setPaint(t,e.paint);var o=this.engine.drawable.decodedDrawables[e.drawable];o&&t.drawImage(o,e.srcX,e.srcY,e.srcW,e.srcH,e.dstX,e.dstY,e.dstW,e.dstH)},m.prototype.setPaint=function(t,e){var o;e&&(t.lineWidth=e.strokeWidth,t.miterLimit=e.strokeMiterLimit,t.lineCap=e.strokeCap.replace("StrokeCap.",""),t.lineJoin=e.strokeJoin.replace("StrokeJoin.",""),"PaintingStyle.fill"===e.style?(t.fillStyle=u.cssColor(e.color),t.strokeStyle="transparent"):(t.fillStyle="transparent",t.strokeStyle=u.cssColor(e.color)),t.globalAlpha=null!==(o=e.alpha)&&void 0!==o?o:1)},m);function m(){var t=null!==h&&h.apply(this,arguments)||this;return t.canvasWidth=0,t.canvasHeight=0,t}o.CustomPaint=f},{"../../env":39,"../component_view":26,"../dom_utils":27,"../utils":34}],8:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),b=this&&this.__assign||function(){return(b=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.CustomScrollView=void 0;var r,_=t("../utils"),s=t("./collection_view"),x=t("./grid_list_layout"),a=(r=s.CollectionView,n(l,r),l.prototype.setChildren=function(t){var u=this;if(t){var p=[],d={},h={};t.forEach(function(t,e){var o,i,n,r,s,a,l,c;"sliver_list"===t.name&&t.children?(d[p.length]=t.attributes,u.factory.fetchCachedChildren(t.children).forEach(function(t){p.push(t)}),h[p.length-1]=!0):"sliver_list"===(null===(i=null===(o=t.children)||void 0===o?void 0:o[0])||void 0===i?void 0:i.name)&&null!==(r=null===(n=t.children)||void 0===n?void 0:n[0])&&void 0!==r&&r.children?(d[p.length]=t.children[0].attributes,u.factory.fetchCachedChildren(t.children[0].children).forEach(function(t,e){p.push(t)}),h[p.length-1]=!0):"sliver_grid"===t.name&&t.children?(d[p.length]=t.attributes,u.factory.fetchCachedChildren(t.children).forEach(function(t){p.push(t)}),h[p.length-1]=!0):"sliver_grid"===(null===(a=null===(s=t.children)||void 0===s?void 0:s[0])||void 0===a?void 0:a.name)&&null!==(c=null===(l=t.children)||void 0===l?void 0:l[0])&&void 0!==c&&c.children?(d[p.length]=t.children[0].attributes,u.factory.fetchCachedChildren(t.children[0].children).forEach(function(t){p.push(t)}),h[p.length-1]=!0):p.push(t),u.factory.create(t,u.document)}),this.listChildren=p,this.layout.items=p,this.layout.sliverGridAttributes=d,this.layout.sliverGridEndIndex=h,r.prototype.setChildren.call(this,p),this.reloadLayouts()}},l.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),this.layout.isHorizontalScroll="Axis.horizontal"===t.scrollDirection},l);function l(t){var e=r.call(this,t)||this;return e.listChildren=[],e.layout=new u(e),e}o.CustomScrollView=a;var c,u=(c=s.CollectionViewLayout,n(p,c),p.prototype.prepareLayout=function(){var h=this,f=this.collectionView.viewWidth,m=this.collectionView.viewHeight;if(!(f<=.01||m<=.01)){var v,y=[],g=0,w=0;this.items.forEach(function(t,e){var o,i,n,r;if(h.sliverGridAttributes[e]){w=0,(v=new x.GridListLayout(h.collectionView)).isHorizontalScroll=h.isHorizontalScroll;for(var s=[],a=e;a<h.items.length&&(s.push(h.items[a]),!h.sliverGridEndIndex[a]);a++);v.clientWidth=h.collectionView.viewWidth,v.clientHeight=h.collectionView.viewHeight;var l=h.sliverGridAttributes[e].gridDelegate;if(l&&(v.isPlain="SliverWaterfallDelegate"!==l.classname,v.crossAxisCount=l.crossAxisCount,v.mainAxisSpacing=l.mainAxisSpacing,v.crossAxisSpacing=l.crossAxisSpacing),h.sliverGridAttributes[e].padding){var c=_.cssPadding(h.sliverGridAttributes[e].padding);v.padding.top=parseFloat(null!==(o=c.paddingTop)&&void 0!==o?o:"0.0"),v.padding.left=parseFloat(null!==(i=c.paddingLeft)&&void 0!==i?i:"0.0"),v.padding.bottom=parseFloat(null!==(n=c.paddingBottom)&&void 0!==n?n:"0.0"),v.padding.right=parseFloat(null!==(r=c.paddingRight)&&void 0!==r?r:"0.0")}v.items=s,v.prepareLayout()}if(v){if(w<v.itemLayouts.length){var u=b({},v.itemLayouts[w]);h.isHorizontalScroll?u.x+=g:u.y+=g,y.push(u)}else y.push({x:0,y:0,width:0,height:0});w++}if(h.sliverGridEndIndex[e]&&v)return h.isHorizontalScroll?g+=v.collectionViewContentSize().width:g+=v.collectionViewContentSize().height,h.maxVLength=g,void(v=void 0);if(!v){var p,d=_.cssSizeFromMPElement(t);h.isHorizontalScroll?(p={x:g,y:0,width:d.width,height:m},g+=d.width):(p={x:0,y:g,width:f,height:d.height},g+=d.height),h.maxVLength=g,y.push(p)}}),this.itemLayouts=y}},p.prototype.collectionViewContentSize=function(){return this.isHorizontalScroll?{width:this.maxVLength,height:this.collectionView.viewHeight}:{width:this.collectionView.viewWidth,height:this.maxVLength}},p.prototype.layoutAttributesForItemAtIndex=function(t){return this.itemLayouts[t]},p);function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.isHorizontalScroll=!1,t.items=[],t.maxVLength=0,t.itemLayouts=[],t.sliverGridAttributes={},t.sliverGridEndIndex={},t}},{"../utils":34,"./collection_view":5,"./grid_list_layout":12}],9:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.DecoratedBox=void 0;var m,r=t("../component_view"),v=t("../dom_utils"),y=t("../utils"),s=(m=r.ComponentView,n(a,m),a.prototype.setAttributes=function(e){var t,o,i,n,r,s,a,l,c,u=this;m.prototype.setAttributes.call(this,e);var p={};if(e.color?p.backgroundColor=y.cssColor(e.color):p.backgroundColor="unset",e.image&&(p.backgroundImage='url("'+function(){if(e.image.src)return e.image.src;if(e.image.assetName&&u.engine.debugger){var t=e.assetPkg?"http://"+u.engine.debugger.serverAddr+"/assets/packages/"+e.assetPkg+"/"+e.assetName:"http://"+u.engine.debugger.serverAddr+"/assets/"+e.assetName;u.htmlElement.src=t}}()+'")',"BoxFit.cover"===e.image.fit?p.backgroundSize="cover":p.backgroundSize="contain"),null!==(t=e.decoration)&&void 0!==t&&t.gradient&&(p.backgroundImage?p.backgroundImage=y.cssGradient(e.decoration.gradient)+","+p.backgroundImage:p.background=y.cssGradient(e.decoration.gradient)),null!==(i=null===(o=e.decoration)||void 0===o?void 0:o.boxShadow)&&void 0!==i&&i[0]){var d=null===(r=null===(n=e.decoration)||void 0===n?void 0:n.boxShadow)||void 0===r?void 0:r[0];p.boxShadow=(null===(s=y.cssOffset(d.offset))||void 0===s?void 0:s.dx)+"px "+(null===(a=y.cssOffset(d.offset))||void 0===a?void 0:a.dy)+"px "+d.blurRadius+"px "+d.spreadRadius+"px "+y.cssColor(d.color)}if(null!==(l=e.decoration)&&void 0!==l&&l.borderRadius){var h=y.cssBorderRadius(e.decoration.borderRadius);for(var f in h)p[f]=h[f]}if(null!==(c=e.decoration)&&void 0!==c&&c.border)for(var f in(h=y.cssBorder(e.decoration.border)).boxSizing="border-box",h)p[f]=h[f];v.setDOMStyle(this.htmlElement,p)},a);function a(){return null!==m&&m.apply(this,arguments)||this}o.DecoratedBox=s},{"../component_view":26,"../dom_utils":27,"../utils":34}],10:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.EditableText=void 0;var a,l=t("../../env"),r=t("../component_view"),c=t("../dom_utils"),u=t("../utils"),p=(a=r.ComponentView,n(d,a),d.prototype.setAttributes=function(t){var e,o,i=this;a.prototype.setAttributes.call(this,t);var n=t.maxLines;if(1<n&&"textarea"!==this.contentElementType?(null!==(e=this.contentElement)&&void 0!==e&&e.remove(),this.contentElement=this.document.createElement("textarea"),c.setDOMStyle(this.contentElement,{width:"100%",height:"100%",backgroundColor:"transparent",border:"none",resize:"none"}),this.htmlElement.appendChild(this.contentElement)):n<=1&&"input"!==this.contentElementType&&(null!==(o=this.contentElement)&&void 0!==o&&o.remove(),this.contentElement=this.document.createElement("input"),c.setDOMStyle(this.contentElement,{width:"100%",height:"100%",backgroundColor:"transparent",border:"none"}),this.htmlElement.appendChild(this.contentElement)),this.contentElement){if(this.contentElement.onkeyup=function(t){"Enter"!==t.key&&13!==t.keyCode||i._onSubmitted(t.target,t.target.value)},this.contentElement.onsubmit=function(t){var e,o;i._onSubmitted(t.target,null!==(o=null===(e=t.detail)||void 0===e?void 0:e.value)&&void 0!==o?o:t.target.value)},this.contentElement.oninput=function(t){var e,o;i._onChanged(t.target,null!==(o=null===(e=t.detail)||void 0===e?void 0:e.value)&&void 0!==o?o:t.target.value)},this.contentElement.onchange=function(t){var e,o;i._onChanged(t.target,null!==(o=null===(e=t.detail)||void 0===e?void 0:e.value)&&void 0!==o?o:t.target.value)},t.style){var r=u.cssTextStyle(t.style);delete r.userSelect,delete r.WebkitUserSelect,c.setDOMStyle(this.contentElement,s(s({},r),{textAlign:u.cssTextAlign(t.textAlign),boxSizing:"border-box"}))}c.setDOMAttribute(this.contentElement,"type",t.obscureText?"password":this._keyboardType(t.keyboardType)),c.setDOMAttribute(this.contentElement,"pattern",this._keyboardPattern(t.keyboardType)),t.value&&(l.MPEnv.platformType===l.PlatformType.wxMiniProgram?c.setDOMAttribute(this.contentElement,"value",t.value):this.contentElement.value=t.value),t.autofocus&&c.setDOMAttribute(this.contentElement,"autoFocus",t.autofocus),t.autoCorrect&&c.setDOMAttribute(this.contentElement,"autoCorrect",t.autoCorrect),t.placeholder&&c.setDOMAttribute(this.contentElement,"placeholder",t.placeholder),c.setDOMAttribute(this.contentElement,"readOnly",t.readOnly?"true":void 0)}},d.prototype.setChildren=function(){},d.prototype._keyboardType=function(t){return 0<(null==t?void 0:t.indexOf("TextInputType.number"))?"number":"text"},d.prototype._keyboardPattern=function(t){if(0<(null==t?void 0:t.indexOf("TextInputType.number"))){var e=0<t.indexOf("signed: true"),o=0<t.indexOf("decimal: true");if(e&&o)return"[0-9+-.]*";if(e&&!o)return"[0-9+-]*";if(!e&&!o)return"[0-9]*"}return""},d.prototype._onSubmitted=function(t,e){this.attributes.onSubmitted&&(this.engine.sendMessage(JSON.stringify({type:"editable_text",message:{event:"onSubmitted",target:this.attributes.onSubmitted,data:e}})),t.blur())},d.prototype._onChanged=function(t,e){this.attributes.onChanged&&this.engine.sendMessage(JSON.stringify({type:"editable_text",message:{event:"onChanged",target:this.attributes.onChanged,data:e}}))},d);function d(){var t=null!==a&&a.apply(this,arguments)||this;return t.contentElementType="",t}o.EditableText=p},{"../../env":39,"../component_view":26,"../dom_utils":27,"../utils":34}],11:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GestureDetector=void 0;var r,s=t("../../env"),a=t("../component_view"),l=t("../dom_utils"),c=(r=a.ComponentView,n(u,r),u.prototype.elementType=function(){return"div"},u.prototype.setConstraints=function(t){if(t){var e=(this.constraints=t).x,o=t.y,i=t.w,n=t.h;"number"==typeof e&&"number"==typeof o&&"number"==typeof i&&"number"==typeof n&&l.setDOMStyle(this.htmlElement,{left:"0px",top:"0px",width:"0.1px",height:"0.1px"})}},u.prototype.setAttributes=function(t){var e=this;r.prototype.setAttributes.call(this,t),this.htmlElement.onclick=function(){e.engine.sendMessage(JSON.stringify({type:"gesture_detector",message:{event:"onTap",target:t.onTap}}))},this.hoverOpacity=t.hoverOpacity,l.setDOMAttribute(this.htmlElement,"hoverOpacity",t.hoverOpacity)},u.prototype.setupGestureCatcher=function(){var t=this;s.MPEnv.platformType===s.PlatformType.browser&&(this.htmlElement.addEventListener("touchstart",function(){t.hoverOpacity&&(t.htmlElement.className="hoverOpacity")},!0),this.htmlElement.addEventListener("touchmove",function(){t.hoverOpacity&&(t.htmlElement.className="")},!0),this.htmlElement.addEventListener("touchend",function(){t.hoverOpacity&&(t.htmlElement.className="")},!0),this.htmlElement.addEventListener("touchcancel",function(){t.hoverOpacity&&(t.htmlElement.className="")},!0))},u);function u(t){var e=r.call(this,t)||this;return e.document=t,e.hoverOpacity=!1,e.setupGestureCatcher(),e}o.GestureDetector=c},{"../../env":39,"../component_view":26,"../dom_utils":27}],12:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GridListLayout=void 0;var r,v=t("../utils"),s=t("./collection_view"),a=(r=s.CollectionViewLayout,n(l,r),l.prototype.prepareLayout=function(){this.isPlain?this.preparePlainLayout():this.prepareWaterfallLayout()},l.prototype.preparePlainLayout=function(){var s=this,a=(0<this.clientWidth?this.clientWidth:this.collectionView.viewWidth)-this.padding.right,l=(0<this.clientHeight?this.clientHeight:this.collectionView.viewHeight)-this.padding.bottom,c=[],u=this.padding.left,p=this.padding.top,d=0;this.items.forEach(function(t,e){var o=v.cssSizeFromMPElement(t),i=o.width,n=o.height;if(s.isHorizontalScroll){var r={x:u,y:p,width:i,height:n};p+=n+s.crossAxisSpacing,d=Math.max(u+i,d),.1<p+n-l&&(p=s.padding.top,e+1<s.items.length&&(u+=i+s.mainAxisSpacing)),c.push(r)}else r={x:u,y:p,width:i,height:n},u+=i+s.crossAxisSpacing,d=Math.max(p+n,d),.1<u+i-a&&(u=s.padding.left,e+1<s.items.length&&(p+=n+s.mainAxisSpacing)),c.push(r)}),this.isHorizontalScroll?d+=this.padding.right:d+=this.padding.bottom,this.itemLayouts=c,this.maxVLength=d},l.prototype.prepareWaterfallLayout=function(){var p=this;if(this.crossAxisCount<=0)this.itemLayouts=[];else{var d=0,h={},f=[],m=0;this.items.forEach(function(t,e){var o=v.cssSizeFromMPElement(t),i=o.width,n=o.height,r=p.isHorizontalScroll?p.padding.left:p.padding.top,s=d,a=s+1>=p.crossAxisCount?0:s+1;if(h[s]&&h[a]){var l=h[s],c=h[a];d=p.isHorizontalScroll?c.x+c.width<l.x+l.width?a:s:c.y+c.height<l.y+l.height?a:s}else d=s;if(h[d]?(l=h[d],r=p.isHorizontalScroll?l.x+l.width:l.y+l.height,e>=p.crossAxisCount&&(r+=p.mainAxisSpacing)):r=p.isHorizontalScroll?p.padding.left:p.padding.top,p.isHorizontalScroll){var u={x:r,y:p.padding.top+n*d+d*p.crossAxisSpacing,width:i,height:n};h[d]=u,d=(d+1)%p.crossAxisCount,m=Math.max(r+i,m),f.push(u)}else u={x:p.padding.left+i*d+d*p.crossAxisSpacing,y:r,width:i,height:n},h[d]=u,d=(d+1)%p.crossAxisCount,m=Math.max(r+n,m),f.push(u)}),this.isHorizontalScroll?m+=this.padding.right:m+=this.padding.bottom,this.itemLayouts=f,this.maxVLength=m}},l.prototype.collectionViewContentSize=function(){return this.isHorizontalScroll?{width:this.maxVLength,height:this.collectionView.viewHeight-this.padding.top-this.padding.bottom}:{width:this.collectionView.viewWidth-this.padding.left-this.padding.right,height:this.maxVLength}},l.prototype.layoutAttributesForItemAtIndex=function(t){return this.itemLayouts[t]},l);function l(){var t=null!==r&&r.apply(this,arguments)||this;return t.isPlain=!0,t.isHorizontalScroll=!1,t.padding={top:0,left:0,bottom:0,right:0},t.clientWidth=0,t.clientHeight=0,t.crossAxisCount=0,t.crossAxisSpacing=0,t.mainAxisSpacing=0,t.items=[],t.maxVLength=0,t.itemLayouts=[],t}o.GridListLayout=a},{"../utils":34,"./collection_view":5}],13:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GridView=void 0;var a,l=t("../utils"),r=t("./collection_view"),s=t("./grid_list_layout"),c=(a=r.CollectionView,n(u,a),u.prototype.setChildren=function(t){var e=this;if(a.prototype.setChildren.call(this,t),t){var o=[];this.factory.fetchCachedChildren(t).forEach(function(t){o.push(t),e.factory.create(t,e.document)}),this.layout.items=o,this.listChildren=o,this.reloadLayouts()}},u.prototype.setAttributes=function(t){var e,o,i,n;a.prototype.setAttributes.call(this,t),this.layout.isHorizontalScroll="Axis.horizontal"===t.scrollDirection;var r=t.gridDelegate;if(r&&(this.layout.isPlain="SliverWaterfallDelegate"!==r.classname,this.layout.crossAxisCount=r.crossAxisCount,this.layout.mainAxisSpacing=r.mainAxisSpacing,this.layout.crossAxisSpacing=r.crossAxisSpacing),t.padding){var s=l.cssPadding(this.attributes.padding);this.layout.padding.top=parseFloat(null!==(e=s.paddingTop)&&void 0!==e?e:"0.0"),this.layout.padding.left=parseFloat(null!==(o=s.paddingLeft)&&void 0!==o?o:"0.0"),this.layout.padding.bottom=parseFloat(null!==(i=s.paddingBottom)&&void 0!==i?i:"0.0"),this.layout.padding.right=parseFloat(null!==(n=s.paddingRight)&&void 0!==n?n:"0.0")}this.reloadLayouts()},u);function u(t){var e=a.call(this,t)||this;return e.listChildren=[],e.layout=new s.GridListLayout(e),e}o.GridView=c},{"../utils":34,"./collection_view":5,"./grid_list_layout":12}],14:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.IgnorePointer=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=(r=s.ComponentView,n(c,r),c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),a.setDOMStyle(this.htmlElement,{pointerEvents:"none"})},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.IgnorePointer=l},{"../component_view":26,"../dom_utils":27}],15:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Image=void 0;var r,s=t("../../env"),a=t("../component_view"),l=t("../dom_utils"),c=(r=a.ComponentView,n(u,r),u.prototype.elementType=function(){return"img"},u.prototype.setAttributes=function(t){var e=this;if(r.prototype.setAttributes.call(this,t),l.setDOMStyle(this.htmlElement,{objectFit:function(){if(!t.fit)return"cover";switch(t.fit){case"BoxFit.fill":return"fill";case"BoxFit.contain":return"contain";case"BoxFit.cover":return"cover";case"BoxFit.fitWidth":case"BoxFit.fitHeight":return"scale-down";case"BoxFit.none":return"none";default:return"contain"}}()}),t.fit&&s.MPEnv.platformType===s.PlatformType.wxMiniProgram&&l.setDOMAttribute(this.htmlElement,"mode",function(){if(!t.fit)return"cover";switch(t.fit){case"BoxFit.fill":return"scaleToFill";case"BoxFit.contain":return"aspectFit";case"BoxFit.cover":return"aspectFill";case"BoxFit.fitWidth":return"widthFix";case"BoxFit.fitHeight":return"heightFix";default:return"aspectFit"}}()),t.src)l.setDOMAttribute(this.htmlElement,"src",t.src);else if(t.assetName)if(this.engine.debugger){var o=t.assetPkg?"http://"+e.engine.debugger.serverAddr+"/assets/packages/"+t.assetPkg+"/"+t.assetName:"http://"+e.engine.debugger.serverAddr+"/assets/"+t.assetName;l.setDOMAttribute(this.htmlElement,"src",o)}else o=t.assetPkg?"assets/packages/"+t.assetPkg+"/"+t.assetName:"assets/"+t.assetName,s.MPEnv.platformType===s.PlatformType.wxMiniProgram&&(o="/"+o),l.setDOMAttribute(this.htmlElement,"src",o)},u);function u(){return null!==r&&r.apply(this,arguments)||this}o.Image=c},{"../../env":39,"../component_view":26,"../dom_utils":27}],16:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ListView=void 0;var s,a=t("../utils"),r=t("./collection_view"),l=t("./grid_list_layout"),c=(s=r.CollectionView,n(u,s),u.prototype.setChildren=function(t){var e=this;if(s.prototype.setChildren.call(this,t),t){var o=[];this.factory.fetchCachedChildren(t).forEach(function(t){o.push(t),e.factory.create(t,e.document)}),this.layout.items=o,this.listChildren=o,this.reloadLayouts()}},u.prototype.setAttributes=function(t){var e,o,i,n;if(s.prototype.setAttributes.call(this,t),this.layout.isHorizontalScroll="Axis.horizontal"===t.scrollDirection,t.padding){var r=a.cssPadding(this.attributes.padding);this.layout.padding.top=parseFloat(null!==(e=r.paddingTop)&&void 0!==e?e:"0.0"),this.layout.padding.left=parseFloat(null!==(o=r.paddingLeft)&&void 0!==o?o:"0.0"),this.layout.padding.bottom=parseFloat(null!==(i=r.paddingBottom)&&void 0!==i?i:"0.0"),this.layout.padding.right=parseFloat(null!==(n=r.paddingRight)&&void 0!==n?n:"0.0")}this.reloadLayouts()},u);function u(t){var e=s.call(this,t)||this;return e.listChildren=[],e.layout=new l.GridListLayout(e),e}o.ListView=c},{"../utils":34,"./collection_view":5,"./grid_list_layout":12}],17:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Offstage=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=(r=s.ComponentView,n(c,r),c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),a.setDOMStyle(this.htmlElement,{display:t.offstage?"none":"unset"})},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.Offstage=l},{"../component_view":26,"../dom_utils":27}],18:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.OpacityAncestor=o.Opacity=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=(r=s.ComponentView,n(c,r),c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),a.setDOMStyle(this.htmlElement,{opacity:t.opacity.toString()})},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.Opacity=l;var u,p=(u=s.AncestorView,n(d,u),d.prototype.setAttributes=function(t){u.prototype.setAttributes.call(this,t),this.target.ancestorStyle.opacity||(this.target.ancestorStyle.opacity=1),this.target.ancestorStyle.opacity*=t.opacity},d);function d(){return null!==u&&u.apply(this,arguments)||this}o.OpacityAncestor=p},{"../component_view":26,"../dom_utils":27}],19:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Overlay=void 0;var r,s=t("../../env"),a=t("../component_view"),l=t("../dom_utils"),c=(r=a.ComponentView,n(u,r),u.prototype.elementType=function(){return s.MPEnv.platformType==s.PlatformType.wxMiniProgram?"catchmove":"div"},u.prototype.setAttributes=function(t){var e=this;r.prototype.setAttributes.call(this,t),s.MPEnv.platformType==s.PlatformType.wxMiniProgram||this.htmlElement.addEventListener("touchmove",function(t){t.preventDefault()}),this.additionalConstraints={position:"fixed"},l.setDOMStyle(this.htmlElement,{position:"fixed"}),t.onBackgroundTap?this.htmlElement.onclick=function(){e.engine.sendMessage(JSON.stringify({type:"overlay",message:{event:"onBackgroundTap",target:t.onBackgroundTap}}))}:this.htmlElement.onclick=null},u);function u(){return null!==r&&r.apply(this,arguments)||this}o.Overlay=c},{"../../env":39,"../component_view":26,"../dom_utils":27}],20:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,n)}r((l=l.apply(t,s||[])).next())})},s=this&&this.__generator||function(o,i){var n,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(o,a)}catch(t){e=[6,t],r=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.WidgetSpan=o.TextSpan=o.RichText=void 0;var a,l=t("../../env"),c=t("../component_view"),u=t("../dom_utils"),p=t("../utils"),d=(a=c.ComponentView,n(h,a),h.prototype.elementType=function(){return"div"},h.prototype.setConstraints=function(t){this.measuring||t&&(this.constraints=t,this.updateLayout(),u.setDOMStyle(this.htmlElement,{position:"absolute",opacity:"1"}))},h.prototype.setAttributes=function(t){var e,o;a.prototype.setAttributes.call(this,t),l.MPEnv.platformType===l.PlatformType.wxMiniProgram&&this.htmlElement.setClass("mp_text");var i=t.maxWidth;this.maxWidth="string"==typeof i?parseFloat(i):void 0;var n=t.maxHeight;this.maxHeight="string"==typeof n?parseFloat(n):void 0,l.MPEnv.platformType===l.PlatformType.wxMiniProgram?u.setDOMStyle(this.htmlElement,{textAlign:p.cssTextAlign(t.textAlign),lineHeight:null===(e=t.height)||void 0===e?void 0:e.toString(),webkitLineClamp:t.maxLines?t.maxLines.toString():"99999"}):u.setDOMStyle(this.htmlElement,{overflow:"hidden",textOverflow:"ellipsis",textAlign:p.cssTextAlign(t.textAlign),display:"-webkit-box",fontSize:"11px",fontFamily:"sans-serif",lineHeight:null===(o=t.height)||void 0===o?void 0:o.toString(),overflowWrap:"anywhere",wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-line",webkitBoxOrient:"vertical",webkitLineClamp:t.maxLines?t.maxLines.toString():"99999"}),this.measureId=t.measureId},h.prototype.setSingleTextSpan=function(n){return r(this,void 0,void 0,function(){var e,o,i;return s(this,function(t){if(e={},n[0].attributes.style)for(i in o=p.cssTextStyle(n[0].attributes.style))e[i]=o[i];return n[0].attributes.text&&(this.htmlElement.innerText=n[0].attributes.text,l.MPEnv.platformType===l.PlatformType.wxMiniProgram&&u.setDOMAttribute(this.htmlElement,"innerText",n[0].attributes.text)),u.setDOMStyle(this.htmlElement,e),[2]})})},h.prototype.setChildren=function(e){var o;return r(this,void 0,void 0,function(){return s(this,function(t){return e&&1===e.length&&"text_span"===e[0].name&&null!==(o=e[0].attributes)&&void 0!==o&&o.text?this.setSingleTextSpan(e):a.prototype.setChildren.call(this,e),[2]})})},h);function h(){var t=null!==a&&a.apply(this,arguments)||this;return t.measuring=!1,t}o.RichText=d;var f,m=(f=c.ComponentView,n(v,f),v.prototype.elementType=function(){return"div"},v.prototype.setChildren=function(t){t instanceof Array&&0<t.length&&f.prototype.setChildren.call(this,t)},v.prototype.setAttributes=function(t){f.prototype.setAttributes.call(this,t);var e={position:"unset",display:"inline"};if(t.style){var o=p.cssTextStyle(t.style);for(var i in o)e[i]=o[i]}t.text&&(this.htmlElement.innerText=t.text,l.MPEnv.platformType===l.PlatformType.wxMiniProgram&&u.setDOMAttribute(this.htmlElement,"innerText",t.text)),u.setDOMStyle(this.htmlElement,e)},v);function v(){return null!==f&&f.apply(this,arguments)||this}o.TextSpan=m;var y,g=(y=c.ComponentView,n(w,y),w.prototype.elementType=function(){return"div"},w.prototype.setChildren=function(t){y.prototype.setChildren.call(this,t),this.subviews[0]&&(this.subviews[0].additionalConstraints={position:"relative"},u.setDOMStyle(this.subviews[0].htmlElement,{position:"relative",display:"inline-flex"}))},w.prototype.setAttributes=function(t){y.prototype.setAttributes.call(this,t),u.setDOMStyle(this.htmlElement,{display:"contents"})},w);function w(){return null!==y&&y.apply(this,arguments)||this}o.WidgetSpan=g},{"../../env":39,"../component_view":26,"../dom_utils":27,"../utils":34}],21:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.SliverPersistentHeader=void 0;var r,s=t("../component_view"),u=t("../dom_utils"),a=(r=s.ComponentView,n(l,r),l.prototype.setAttributes=function(t){this.attributes=t,this.pinned=t.pinned,this.updateLayout()},l.prototype.updateLayout=function(){var t,e,o,i,n,r;if(this.constraints){var s=this.constraints.x,a=this.y,l=this.constraints.w,c=this.constraints.h;this.ancestors.forEach(function(t){t.constraints&&(s+=t.constraints.x,a+=t.constraints.y)}),u.setDOMStyle(this.htmlElement,{position:"sticky",left:null!==(e=null===(t=this.additionalConstraints)||void 0===t?void 0:t.left)&&void 0!==e?e:s+"px",top:this.h+"px",marginTop:a+"px",width:null!==(i=null===(o=this.additionalConstraints)||void 0===o?void 0:o.width)&&void 0!==i?i:l+"px",height:null!==(r=null===(n=this.additionalConstraints)||void 0===n?void 0:n.height)&&void 0!==r?r:c+"px",zIndex:"99"})}},l);function l(){var t=null!==r&&r.apply(this,arguments)||this;return t.pinned=!0,t.y=0,t.h=0,t}o.SliverPersistentHeader=a},{"../component_view":26,"../dom_utils":27}],22:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Transform=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=(r=s.ComponentView,n(c,r),c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),a.setDOMStyle(this.htmlElement,{transform:t.transform})},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.Transform=l},{"../component_view":26,"../dom_utils":27}],23:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Visibility=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=(r=s.ComponentView,n(c,r),c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),a.setDOMStyle(this.htmlElement,{display:t.visible?"contents":"none"})},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.Visibility=l},{"../component_view":26,"../dom_utils":27}],24:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.WebDialogs=void 0;var i=t("../../env"),n=(r.receivedWebDialogsMessage=function(t,e){i.MPEnv.platformType===i.PlatformType.wxMiniProgram?this.wxMiniProgramReceivedWebDialogsMessage(t,e):this.browserMiniProgramReceivedWebDialogsMessage(t,e)},r.wxMiniProgramReceivedWebDialogsMessage=function(e,o){var t,i;if("alert"===o.params.dialogType)wx.showModal({content:o.params.message,showCancel:!1,confirmText:"",success:function(){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id}}))}});else if("confirm"===o.params.dialogType)wx.showModal({content:o.params.message,cancelText:"",confirmText:"",success:function(t){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:1==t.confirm}}))}});else if("prompt"===o.params.dialogType)wx.showModal({title:o.params.message,content:null!==(t=o.params.defaultValue)&&void 0!==t?t:"",editable:!0,cancelText:"",confirmText:"",success:function(t){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:t.content}}))}});else if("actionSheet"===o.params.dialogType)wx.showActionSheet({itemList:o.params.items,success:function(t){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:t.tapIndex}}))},fail:function(){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:null}}))}});else if("showToast"===o.params.dialogType){var n={};o.params.title&&(n.title=o.params.title),o.params.icon&&(n.icon=null===(i=o.params.icon)||void 0===i?void 0:i.replace("ToastIcon.","")),o.params.duration&&(n.duration=o.params.duration),o.params.mask&&(n.mask=o.params.mask),wx.showToast(n)}else"hideToast"===o.params.dialogType&&wx.hideToast()},r.browserMiniProgramReceivedWebDialogsMessage=function(e,o){var t,i;if("alert"===o.params.dialogType)window.alert(o.params.message),e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id}}));else if("confirm"===o.params.dialogType){var n=window.confirm(o.params.message);e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:n}}))}else if("prompt"===o.params.dialogType)n=window.prompt(o.params.message,null!==(t=o.params.defaultValue)&&void 0!==t?t:""),e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:n}}));else if("actionSheet"===o.params.dialogType)window.MPWebDialog.showActionSheet({itemList:o.params.items,success:function(t){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:t.tapIndex}}))},fail:function(){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:null}}))}});else if("showToast"===o.params.dialogType){var r={};o.params.title&&(r.title=o.params.title),o.params.icon&&(r.icon=null===(i=o.params.icon)||void 0===i?void 0:i.replace("ToastIcon.","")),o.params.duration&&(r.duration=o.params.duration),o.params.mask&&(r.mask=o.params.mask),window.MPWebDialog.showToast(r)}else"hideToast"===o.params.dialogType&&window.MPWebDialog.hideToast()},r);function r(){}o.WebDialogs=n},{"../../env":39}],25:[function(A,t,T){(function(c){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ComponentFactory=void 0;var t=A("./basic/absorb_pointer"),e=A("./basic/clip_oval"),o=A("./basic/clip_r_rect"),i=A("./basic/colored_box"),n=A("./basic/decorated_box"),r=A("./basic/gesture_detector"),s=A("./basic/ignore_pointer"),a=A("./basic/offstage"),l=A("./basic/opacity"),u=A("./basic/transform"),p=A("./basic/image"),d=A("./component_view"),h=A("./mpkit/scaffold"),f=A("./basic/rich_text"),m=A("./basic/list_view"),v=A("./basic/grid_view"),y=A("./basic/custom_scroll_view"),g=A("./basic/custom_paint"),w=A("./mpkit/icon"),b=A("./mpkit/video_view"),_=A("./mpkit/web_view"),x=A("./mpkit/page_view"),P=A("./basic/overlay"),S=A("./basic/visibility"),O=A("./basic/sliver_persistent_header"),M=A("./basic/editable_text"),C=A("./mpkit/platform_view"),E=(R.prototype.create=function(t,e){var o;if(t){var i=t["^"],n=t.name,r=t.hashCode;if(1==i&&"number"==typeof r)return this.cachedView[r];if(n&&r){i||(this.cachedElement[r]=t);var s=!R.disableCache&&this.cachedView[r];if(s)return e=s.document,t.constraints&&s.setConstraints(t.constraints),t.attributes&&s.setAttributes(t.attributes),t.children&&s.setChildren(this.fetchCachedChildren(t.children)),t.ancestors&&s.setAncestors(t.ancestors),s;if(e){var a=R.components[n],l=new(a=a||d.ComponentView)(e);return null!==(o=null!==window&&void 0!==window?window:c)&&void 0!==o&&o.mpDEBUG&&l.htmlElement.setAttribute("mp-component",n),l.factory=this,l.engine=this.engine,l.hashCode=r,t.constraints&&l.setConstraints(t.constraints),t.attributes&&l.setAttributes(t.attributes),t.children&&(R.disableCache?l.setChildren(t.children):l.setChildren(this.fetchCachedChildren(t.children))),t.ancestors&&l.setAncestors(t.ancestors),R.disableCache||(this.cachedView[r]=l),l}}}},R.prototype.createAncestors=function(t,e){var o=t["^"],i=t.name,n=t.hashCode;if(1==o&&"number"==typeof n)return this.cachedAncestor[n];if(i&&n){o||(this.cachedElement[n]=t);var r=this.cachedAncestor[n];if(r){if(r.target&&r.target!==e){var s=r.target.ancestors.indexOf(r);0<=s&&r.target.ancestors.splice(s,1)}return r.target=e,t.attributes&&r.setAttributes(t.attributes),t.constraints&&r.setConstraints(t.constraints),r}if(e){var a=R.ancestors[i];if(a){var l=new a(e);return t.attributes&&l.setAttributes(t.attributes),t.constraints&&l.setConstraints(t.constraints),this.cachedAncestor[n]=l}}}},R.prototype.fetchCachedChildren=function(t){var i=this;return t.map(function(t){var e=t["^"],o=t.hashCode;return e&&i.cachedElement[o]?i.cachedElement[o]:t})},R.prototype.callbackTextMeasureResult=function(t,e){var o=this;this.textMeasureResults.push({measureId:t,size:e}),this.markedNeedsFlushTextMeasureResult||(this.markedNeedsFlushTextMeasureResult=!0,setTimeout(function(){o.flushTextMeasureResult(),o.markedNeedsFlushTextMeasureResult=!1},50))},R.prototype.flushTextMeasureResult=function(){0<this.textMeasureResults.length&&(this.engine.sendMessage(JSON.stringify({type:"rich_text",message:{event:"onMeasured",data:this.textMeasureResults}})),this.textMeasureResults=[])},R.components={absorb_pointer:t.AbsorbPointer,clip_oval:e.ClipOval,clip_r_rect:o.ClipRRect,colored_box:i.ColoredBox,custom_paint:g.CustomPaint,custom_scroll_view:y.CustomScrollView,decorated_box:n.DecoratedBox,editable_text:M.EditableText,gesture_detector:r.GestureDetector,grid_view:v.GridView,ignore_pointer:s.IgnorePointer,image:p.Image,list_view:m.ListView,offstage:a.Offstage,opacity:l.Opacity,overlay:P.Overlay,rich_text:f.RichText,text_span:f.TextSpan,widget_span:f.WidgetSpan,sliver_persistent_header:O.SliverPersistentHeader,transform:u.Transform,visibility:S.Visibility,mp_icon:w.MPIcon,mp_scaffold:h.MPScaffold,mp_video_view:b.MPVideoView,mp_web_view:_.MPWebView,mp_page_view:x.MPPageView,mp_platform_view:C.MPPlatformView},R.ancestors={opacity:l.OpacityAncestor,clip_r_rect:o.ClipRRectAncestor},R.disableCache=!1,R);function R(t){this.engine=t,this.cachedView={},this.cachedAncestor={},this.cachedElement={},this.textMeasureResults=[],this.markedNeedsFlushTextMeasureResult=!1}T.ComponentFactory=E}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./basic/absorb_pointer":2,"./basic/clip_oval":3,"./basic/clip_r_rect":4,"./basic/colored_box":6,"./basic/custom_paint":7,"./basic/custom_scroll_view":8,"./basic/decorated_box":9,"./basic/editable_text":10,"./basic/gesture_detector":11,"./basic/grid_view":13,"./basic/ignore_pointer":14,"./basic/image":15,"./basic/list_view":16,"./basic/offstage":17,"./basic/opacity":18,"./basic/overlay":19,"./basic/rich_text":20,"./basic/sliver_persistent_header":21,"./basic/transform":22,"./basic/visibility":23,"./component_view":26,"./mpkit/icon":28,"./mpkit/page_view":29,"./mpkit/platform_view":30,"./mpkit/scaffold":31,"./mpkit/video_view":32,"./mpkit/web_view":33}],26:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.AncestorView=o.ComponentView=void 0;var f=t("./dom_utils"),i=(n.prototype.elementType=function(){return"div"},n.prototype.setConstraints=function(t){t&&(this.constraints=t,this.updateLayout())},n.prototype.updateLayout=function(){var t,e,o,i,n,r,s,a,l,c;if(this.constraints){var u=this.constraints.x,p=this.constraints.y,d=this.constraints.w,h=this.constraints.h;this.ancestors.forEach(function(t){t.constraints&&(u+=t.constraints.x,p+=t.constraints.y)}),f.setDOMStyle(this.htmlElement,{position:null!==(e=null===(t=this.additionalConstraints)||void 0===t?void 0:t.position)&&void 0!==e?e:"absolute",left:null!==(i=null===(o=this.additionalConstraints)||void 0===o?void 0:o.left)&&void 0!==i?i:u+"px",top:null!==(r=null===(n=this.additionalConstraints)||void 0===n?void 0:n.top)&&void 0!==r?r:p+"px",width:null!==(a=null===(s=this.additionalConstraints)||void 0===s?void 0:s.width)&&void 0!==a?a:d+"px",height:null!==(c=null===(l=this.additionalConstraints)||void 0===l?void 0:l.height)&&void 0!==c?c:h+"px"})}},n.prototype.setAttributes=function(t){this.attributes=t},n.prototype.setChildren=function(t){var o=this;if(t instanceof Array){var e=t.map(function(t){return o.factory.create(t,o.document)}).filter(function(t){return t}),i=!1;e.length===this.subviews.length&&e.every(function(t,e){return t===o.subviews[e]&&t.superview===o})||(i=!0),i&&(this.removeAllSubviews(),e.forEach(function(t){return o.addSubview(t)}))}},n.prototype.resetAncestorStyle=function(){this.ancestorStyle.opacity&&(this.ancestorStyle.opacity=1),this.ancestorStyle.borderRadius&&(this.ancestorStyle.borderRadius="unset"),this.ancestorStyle.overflow&&(this.ancestorStyle.overflow="unset"),this.ancestorStyle.borderTopLeftRadius&&(this.ancestorStyle.borderTopLeftRadius="unset"),this.ancestorStyle.borderTopRightRadius&&(this.ancestorStyle.borderTopRightRadius="unset"),this.ancestorStyle.borderBottomLeftRadius&&(this.ancestorStyle.borderBottomLeftRadius="unset"),this.ancestorStyle.borderBottomRightRadius&&(this.ancestorStyle.borderBottomRightRadius="unset")},n.prototype.setAncestors=function(t){var e=this;!(t instanceof Array)&&0<this.ancestors.length?(this.resetAncestorStyle(),this.ancestors=[]):(this.resetAncestorStyle(),this.ancestors=t.map(function(t){return e.factory.createAncestors(t,e)}).filter(function(t){return t})),f.setDOMStyle(this.htmlElement,this.ancestorStyle)},n.prototype.removeAllSubviews=function(){this.subviews.forEach(function(t){t.superview=void 0,t.htmlElement.remove()}),this.subviews=[]},n.prototype.removeFromSuperview=function(){var t;if(this.superview){var e=this.superview.subviews.indexOf(this);0<=e&&(this.superview.subviews=null===(t=this.superview)||void 0===t?void 0:t.subviews.splice(e,1)),this.htmlElement.remove()}},n.prototype.addSubview=function(t){t.superview&&t.removeFromSuperview(),this.subviews.push(t),(t.superview=this).htmlElement.appendChild(t.htmlElement)},n);function n(t){this.document=t,this.subviews=[],this.ancestors=[],this.ancestorStyle={},this.htmlElement=t.createElement(this.elementType())}o.ComponentView=i;var r=(s.prototype.setConstraints=function(t){t&&(this.constraints=t,this.target.updateLayout())},s.prototype.setAttributes=function(t){},s);function s(t){this.target=t}o.AncestorView=r},{"./dom_utils":27}],27:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.setDOMAttribute=o.setDOMStyle=void 0,o.setDOMStyle=function(t,e){if(0!==Object.keys(e).length)if("function"==typeof HTMLElement&&t instanceof HTMLElement)for(var o in e)t.style[o]=e[o];else t.setStyle(e)},o.setDOMAttribute=function(t,e,o){void 0===t.attributes&&(t.attributes={}),t.attributes[e]!==o&&(void 0===(t.attributes[e]=o)?t.removeAttribute(e):t.setAttribute(e,o))}},{}],28:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPIcon=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=t("../utils"),c=(r=s.ComponentView,n(u,r),u.prototype.setChildren=function(){},u.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),a.setDOMStyle(this.htmlElement,{backgroundColor:l.cssColor(t.color),mask:"url("+t.iconUrl+") no-repeat center",webkitMask:"url("+t.iconUrl+") no-repeat center",width:"24px",height:"24px",transform:"scale("+t.size/24+", "+t.size/24+")",transformOrigin:"top left"})},u);function u(){return null!==r&&r.apply(this,arguments)||this}o.MPIcon=c},{"../component_view":26,"../dom_utils":27,"../utils":34}],29:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPPageView=void 0;var r,s=t("../../env"),a=t("../component_view"),l=t("../dom_utils"),c=(r=a.ComponentView,n(u,r),u.prototype.setChildren=function(t){r.prototype.setChildren.call(this,t),this.htmlElement.className="swiper-container",this.htmlElement.id="d_"+this.hashCode,this.subviews.forEach(function(t){t.htmlElement.className="swiper-slide",t.htmlElement.style.position="relative"}),this.setupSwiperInstance()},u.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),this.direction="Axis.vertical"===t.scrollDirection?"vertical":"horizontal",this.loop=t.loop,this.wrapperHtmlElement.style.flexDirection="Axis.vertical"===t.scrollDirection?"column":"row",this.setupSwiperInstance()},u.prototype.setupSwiperInstance=function(){var t=this;setTimeout(function(){t.swiperInstance?(t.swiperInstance.changeDirection(t.direction),t.swiperInstance.update()):t.swiperInstance=new window.Swiper("#d_"+t.hashCode,{direction:t.direction,loop:t.loop})},16)},u.prototype.addSubview=function(t){t.superview&&t.removeFromSuperview(),this.subviews.push(t),(t.superview=this).wrapperHtmlElement.appendChild(t.htmlElement)},u);function u(t){var e=r.call(this,t)||this;return e.wrapperHtmlElement=e.document.createElement("div"),e.direction="horizontal",e.loop=!1,e.wrapperHtmlElement.className="swiper-wrapper",e.htmlElement.appendChild(e.wrapperHtmlElement),e}var p,d=(p=a.ComponentView,n(h,p),h.prototype.elementType=function(){return"swiper"},h.prototype.setAttributes=function(t){p.prototype.setAttributes.call(this,t),l.setDOMAttribute(this.htmlElement,"vertical","Axis.vertical"===t.scrollDirection),l.setDOMAttribute(this.htmlElement,"circular",!!t.loop)},h);function h(){return null!==p&&p.apply(this,arguments)||this}o.MPPageView=s.MPEnv.platformType===s.PlatformType.wxMiniProgram?d:c},{"../../env":39,"../component_view":26,"../dom_utils":27}],30:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPPlatformView=void 0;var r,s=t("../component_view"),a=(r=s.ComponentView,n(l,r),l.prototype.elementType=function(){return"div"},l.prototype.onMethodCall=function(t,e){},l.prototype.invokeMethod=function(t,e){this.engine.sendMessage(JSON.stringify({type:"platform_view",message:{event:"methodCall",hashCode:this.hashCode,method:t,params:e}}))},l.prototype.setChildren=function(){},l);function l(){return null!==r&&r.apply(this,arguments)||this}o.MPPlatformView=a},{"../component_view":26}],31:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPScaffold=void 0;var s,r=t("../component_view"),a=t("../dom_utils"),l=t("../utils"),c=(s=r.ComponentView,n(u,s),u.prototype.setAppBar=function(t){this.appBar!==t&&(this.removeAllSubviews(),(this.appBar=t)&&this.engine.pageMode&&(t.additionalConstraints={position:"fixed"},a.setDOMStyle(t.htmlElement,{position:"fixed",zIndex:"9999"})),this.readdSubviews())},u.prototype.setBody=function(t){this.body!==t&&(this.removeAllSubviews(),this.body=t,this.readdSubviews())},u.prototype.setBottomBar=function(t){this.bottomBar!==t&&(this.removeAllSubviews(),(this.bottomBar=t)&&this.engine.pageMode&&(t.additionalConstraints={position:"fixed",top:"unset",zIndex:"9999"},a.setDOMStyle(t.htmlElement,{position:"fixed",top:"unset",bottom:"0px"})),this.readdSubviews())},u.prototype.setFloatingBody=function(t){this.floatingBody!==t&&(this.removeAllSubviews(),(this.floatingBody=t)&&this.engine.pageMode&&(t.additionalConstraints={position:"fixed",zIndex:"9999"},a.setDOMStyle(t.htmlElement,{position:"fixed"})),this.readdSubviews())},u.prototype.readdSubviews=function(){this.body&&this.addSubview(this.body),this.appBar&&this.addSubview(this.appBar),this.bottomBar&&this.addSubview(this.bottomBar),this.floatingBody&&this.addSubview(this.floatingBody)},u.prototype.setAttributes=function(t){var e,o,i,n,r;s.prototype.setAttributes.call(this,t),this.setAppBar(t.appBar?this.factory.create(t.appBar,this.document):void 0),this.setBody(t.body?this.factory.create(t.body,this.document):void 0),this.setBottomBar(t.bottomBar?this.factory.create(t.bottomBar,this.document):void 0),this.setFloatingBody(t.floatingBody?this.factory.create(t.floatingBody,this.document):void 0),t.name?null!==(e=this.delegate)&&void 0!==e&&e.setPageTitle(t.name):null!==(o=this.delegate)&&void 0!==o&&o.setPageTitle(""),t.backgroundColor?null!==(i=this.delegate)&&void 0!==i&&i.setPageBackgroundColor(l.cssColorHex(t.backgroundColor)):null!==(n=this.delegate)&&void 0!==n&&n.setPageBackgroundColor("transparent"),t.appBarColor&&null!==(r=this.delegate)&&void 0!==r&&r.setAppBarColor(l.cssColorHex(t.appBarColor),t.appBarTintColor?l.cssColorHex(t.appBarTintColor):"#000000")},u.prototype.setDelegate=function(t){this.delegate=t},u.prototype.onRefresh=function(){var e=this;return new Promise(function(t){e.refreshEndResolver=t,e.engine.sendMessage(JSON.stringify({type:"scaffold",message:{event:"onRefresh",target:e.hashCode}}))})},u.prototype.onReachBottom=function(){this.engine.sendMessage(JSON.stringify({type:"scaffold",message:{event:"onReachBottom",target:this.hashCode}}))},u.prototype.setChildren=function(){},u);function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.attached=!1,t}o.MPScaffold=c},{"../component_view":26,"../dom_utils":27,"../utils":34}],32:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPVideoView=void 0;var r,s=t("../dom_utils"),a=t("./platform_view"),l=(r=a.MPPlatformView,n(c,r),c.prototype.elementType=function(){return"video"},c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),s.setDOMAttribute(this.htmlElement,"src",t.url),t.controls&&s.setDOMAttribute(this.htmlElement,"controls",t.controls),t.autoplay&&s.setDOMAttribute(this.htmlElement,"autoplay",t.autoplay),t.loop&&s.setDOMAttribute(this.htmlElement,"loop",t.loop),t.muted&&s.setDOMAttribute(this.htmlElement,"muted",t.muted),t.poster&&s.setDOMAttribute(this.htmlElement,"poster",t.poster)},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.MPVideoView=l},{"../dom_utils":27,"./platform_view":30}],33:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPWebView=void 0;var r,s=t("../dom_utils"),a=t("./platform_view"),l=(r=a.MPPlatformView,n(c,r),c.prototype.elementType=function(){return"iframe"},c.prototype.onMethodCall=function(t,e){"reload"===t?(s.setDOMAttribute(this.htmlElement,"src",""),s.setDOMAttribute(this.htmlElement,"src",this.attributes.url)):"loadUrl"===t&&null!=e&&e.url&&(s.setDOMAttribute(this.htmlElement,"src",""),s.setDOMAttribute(this.htmlElement,"src",e.url))},c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),s.setDOMAttribute(this.htmlElement,"src",t.url),s.setDOMStyle(this.htmlElement,{border:"none"})},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.MPWebView=l},{"../dom_utils":27,"./platform_view":30}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cssSizeFromMPElement=n.cssPadding=n.cssTextStyle=n.cssTextAlign=n.cssBorder=n.cssOffset=n.cssGradient=n.cssBorderRadius=n.cssColorHex=n.cssColor=void 0,n.cssColor=function(t){var e=parseInt(t),o=(e>>16&255).toString(16);o.length<2&&(o="0"+o);var i=(e>>8&255).toString(16);i.length<2&&(i="0"+i);var n=(e>>0&255).toString(16);n.length<2&&(n="0"+n);var r=(e>>24&255).toString(16);return"ff"===r?"#"+o+i+n:(r.length<2&&(r="0"+r),"#"+o+i+n+r)},n.cssColorHex=function(t){var e=parseInt(t),o=(e>>16&255).toString(16);o.length<2&&(o="0"+o);var i=(e>>8&255).toString(16);i.length<2&&(i="0"+i);var n=(e>>0&255).toString(16);return n.length<2&&(n="0"+n),"#"+o+i+n},n.cssBorderRadius=function(t){var e,o,i,n,r,s,a,l,c;return 0!==t.indexOf("BorderRadius.circular(")?0!==t.indexOf("BorderRadius.all(")?0!==t.indexOf("BorderRadius.only(")?{}:{borderTopLeftRadius:(null!==(o=null===(e=(c=t.replace("BorderRadius.only(","").replace(/\)/gi,"").replace(/Radius.circular\(/gi,"")).match(/topLeft: ([0-9|.]+)/))||void 0===e?void 0:e[1])&&void 0!==o?o:0)+"px",borderTopRightRadius:(null!==(n=null===(i=c.match(/topRight: ([0-9|.]+)/))||void 0===i?void 0:i[1])&&void 0!==n?n:0)+"px",borderBottomLeftRadius:(null!==(s=null===(r=c.match(/bottomLeft: ([0-9|.]+)/))||void 0===r?void 0:r[1])&&void 0!==s?s:0)+"px",borderBottomRightRadius:(null!==(l=null===(a=c.match(/bottomRight: ([0-9|.]+)/))||void 0===a?void 0:a[1])&&void 0!==l?l:0)+"px"}:{borderRadius:(c=t.replace("BorderRadius.all(","").replace(")",""))+"px"}:{borderRadius:(c=t.replace("BorderRadius.circular(","").replace(")",""))+"px"}},n.cssGradient=function(o){if(!o)return"";if("LinearGradient"!==o.classname)return"";return"linear-gradient("+function(){switch(o.end){case"centerRight":return"to right";case"centerLeft":return"to left";case"topRight":return"to top right";case"bottomRight":return"to bottom right";case"topLeft":return"to top left";case"bottomLeft":return"to bottom left";case"topCenter":return"to top";case"bottomCenter":return"to bottom"}}()+", "+(o.stops&&o.stops.length?o.colors.map(function(t,e){return void 0!==o.stops[e]?n.cssColor(t)+" "+(100*o.stops[e]).toFixed(0)+"%":n.cssColor(t)}):o.colors.map(function(t){return n.cssColor(t)})).join(", ")+")"},n.cssOffset=function(t){if(0===t.indexOf("Offset(")){var e=t.replace("Offset(","").replace(")","").split(",").map(function(t){return t.trim()});return{dx:e[0],dy:e[1]}}},n.cssBorder=function(t){var e={};return"BorderStyle.none"!==t.topStyle&&(e.borderTopWidth=0===t.topWidth?(1/window.devicePixelRatio).toFixed(2)+"px":t.topWidth+"px",e.borderTopColor=n.cssColor(t.topColor),e.borderTopStyle="solid"),"BorderStyle.none"!==t.leftStyle&&(e.borderLeftWidth=0===t.leftWidth?(1/window.devicePixelRatio).toFixed(2)+"px":t.leftWidth+"px",e.borderLeftColor=n.cssColor(t.leftColor),e.borderLeftStyle="solid"),"BorderStyle.none"!==t.bottomStyle&&(e.borderBottomWidth=0===t.bottomWidth?(1/window.devicePixelRatio).toFixed(2)+"px":t.bottomWidth+"px",e.borderBottomColor=n.cssColor(t.bottomColor),e.borderBottomStyle="solid"),"BorderStyle.none"!==t.rightStyle&&(e.borderRightWidth=0===t.rightWidth?(1/window.devicePixelRatio).toFixed(2)+"px":t.rightWidth+"px",e.borderRightColor=n.cssColor(t.rightColor),e.borderRightStyle="solid"),e},n.cssTextAlign=function(t){return null==t?void 0:t.replace("TextAlign.","")},n.cssTextStyle=function(t){var e,o,i={userSelect:"none",WebkitUserSelect:"none"};return null!=t&&(t.fontFamily&&(i.fontFamily=t.fontFamily),null!=t.fontSize&&(i.fontSize=(null!==(e=t.fontSize)&&void 0!==e?e:14).toString()+"px"),null!=t.color&&(i.color=n.cssColor(t.color)),t.fontWeight&&(i.fontWeight=function(t){if(t.fontWeight)return t.fontWeight.replace("FontWeight.w","")}(t)),t.fontStyle&&(i.fontStyle=function(t){if("FontStyle.italic"===t.fontStyle)return"italic"}(t)),t.letterSpacing&&(i.letterSpacing=t.letterSpacing),t.wordSpacing&&(i.wordSpacing=t.wordSpacing),t.textBaseline&&(i.alignmentBaseline="TextBaseline.alphabetic"===(o=t).textBaseline?"alphabetic":"TextBaseline.ideographic"===o.textBaseline?"ideographic":void 0),t.height&&(i.lineHeight=t.height),null!=t.backgroundColor&&(i.backgroundColor=n.cssColor(t.backgroundColor)),t.decoration&&("TextDecoration.lineThrough"===t.decoration?i.textDecoration="line-through":"TextDecoration.underline"===t.decoration&&(i.textDecoration="underline"))),i},n.cssPadding=function(t){if(!t)return{};if(0===t.indexOf("EdgeInsets.zero"))return{};if(0===t.indexOf("EdgeInsets.all("))return{paddingLeft:(e=t.replace("EdgeInsets.all(","").replace(")",""))+"px",paddingTop:e+"px",paddingRight:e+"px",paddingBottom:e+"px"};if(0!==t.indexOf("EdgeInsets("))return{};var e,o=(e=t.replace("EdgeInsets(","").replace(")","")).split(",").map(function(t){return t.trim()});return{paddingLeft:o[0]+"px",paddingTop:o[1]+"px",paddingRight:o[2]+"px",paddingBottom:o[3]+"px"}},n.cssSizeFromMPElement=function(t){if(!t)return{width:0,height:0};var e=0,o=0;if(t.constraints&&"number"==typeof t.constraints.w&&"number"==typeof t.constraints.h&&0<t.constraints.w&&0<t.constraints.h)e=t.constraints.w,o=t.constraints.h;else if(t.children instanceof Array&&1===t.children.length)return n.cssSizeFromMPElement(t.children[0]);return{width:e,height:o}}},{}],35:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.BrowserDebugger=void 0;var i=(n.prototype.start=function(){var e=this,t="ws";"https:"===new URL(location.href).protocol&&(t="wss"),this.socket=new WebSocket(t+"://"+this.serverAddr+"/ws"),this.socket.onopen=function(){e.needReload?location.href="?":(e.socketDidConnect(),e.connected=!0)},this.socket.onmessage=function(t){"string"==typeof t.data&&e.socketDidReceiveMessage(t.data)},this.socket.onclose=function(){e.needReload=!0,e.socketDidDisconnect()}},n.prototype.socketDidConnect=function(){var o=this;this.messageQueue.forEach(function(t){var e;null!==(e=o.socket)&&void 0!==e&&e.send(t)}),this.messageQueue=[]},n.prototype.socketDidDisconnect=function(){var t=this;setTimeout(function(){t.start()},1e3)},n.prototype.socketDidReceiveMessage=function(t){this.engine.didReceivedMessage(t)},n.prototype.sendMessage=function(t){this.socket&&1==this.socket.readyState?this.socket.send(t):this.messageQueue.push(t)},n);function n(t,e){this.serverAddr=t,this.engine=e,this.messageQueue=[],this.connected=!1,this.needReload=!1}o.BrowserDebugger=i},{}],36:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.createDebugger=void 0;var i=t("../env"),n=t("./browser_debugger"),r=t("./wx_debugger");o.createDebugger=function(t,e){return i.MPEnv.platformType===i.PlatformType.wxMiniProgram?new r.WXDebugger(t,e):new n.BrowserDebugger(t,e)}},{"../env":39,"./browser_debugger":35,"./wx_debugger":37}],37:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.WXDebugger=void 0;var i=(n.prototype.start=function(){var e=this;this.socket=wx.connectSocket({url:"ws://"+this.serverAddr+"/ws"}),this.socket.onOpen(function(){e.connected=!0,e.socketDidConnect()}),this.socket.onMessage(function(t){"string"==typeof t.data&&e.socketDidReceiveMessage(t.data)}),this.socket.onClose(function(){e.connected&&(e.engine.componentFactory.cachedElement={},e.engine.componentFactory.cachedView={},wx.reLaunch({url:"/"+wx.getLaunchOptionsSync().path+"?"+e.encodePathParams(wx.getLaunchOptionsSync().query)})),e.connected=!1,e.socketDidDisconnect()})},n.prototype.encodePathParams=function(t){var e=[];if(t)for(var o in t)e.push(o+"="+encodeURIComponent(t[o]));return e.join("&")},n.prototype.socketDidConnect=function(){var o=this;this.messageQueue.forEach(function(t){var e;null!==(e=o.socket)&&void 0!==e&&e.send({data:t})}),this.messageQueue=[]},n.prototype.socketDidDisconnect=function(){var t=this;setTimeout(function(){t.start()},1e3)},n.prototype.socketDidReceiveMessage=function(t){this.engine.didReceivedMessage(t)},n.prototype.sendMessage=function(t){this.socket&&this.connected?this.socket.send({data:t}):this.messageQueue.push(t)},n);function n(t,e){this.serverAddr=t,this.engine=e,this.messageQueue=[],this.connected=!1}o.WXDebugger=i},{}],38:[function(require,module,exports){(function(global){"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Engine=void 0;var custom_paint_1=require("./components/basic/custom_paint"),web_dialogs_1=require("./components/basic/web_dialogs"),component_factory_1=require("./components/component_factory"),debugger_1=require("./debugger/debugger"),env_1=require("./env"),method_channel_handler_1=require("./mpjs/method_channel_handler"),mpjs_1=require("./mpjs/mpjs"),text_measurer_1=require("./text_measurer"),window_info_1=require("./window_info");try{var self_1=null!==window&&void 0!==window?window:global;self_1.mpDEBUG=null!==(_a=self_1.mpDEBUG)&&void 0!==_a&&_a}catch(t){}var Engine=function(){function Engine(){this.started=!1,this.messageQueue=[],this.managedViews={},this.unmanagedViewFrameData={},this.mpJS=new mpjs_1.MPJS(this),this.windowInfo=new window_info_1.WindowInfo(this),this.pageMode=!1,this.componentFactory=new component_factory_1.ComponentFactory(this),this.drawable=new custom_paint_1.MPDrawable(this),method_channel_handler_1.MethodChannelHandler.installHandler()}return Engine.codeBlockWithCodePath=function(codePath){return new Promise(function(res,rej){var httpRequest=new XMLHttpRequest;httpRequest.onload=function(){res(function(){eval(httpRequest.response)})},httpRequest.onerror=function(t){rej(t)},httpRequest.open("GET",codePath),httpRequest.send()})},Engine.codeBlockWithFile=function(t){return function(){require(t).main()}},Engine.registerPlatformView=function(t,e){component_factory_1.ComponentFactory.components[t]=e},Engine.prototype.initWithDebuggerServerAddr=function(t){this.debugger=debugger_1.createDebugger(t,this)},Engine.prototype.initWithCodeBlock=function(t){this.codeBlock=t},Engine.prototype.start=function(){var e=this;this.started||(this.codeBlock||this.debugger)&&(this.windowInfo.updateWindowInfo(),this.listenViewport(),self?self.engineScope=this.mpJS.engineScope:(global.self={JSON:JSON,setTimeout:setTimeout,setInterval:setInterval,clearTimeout:clearTimeout,clearInterval:clearInterval,wx:wx,Object:Object},global.JSON=JSON,global.setTimeout=setTimeout,global.setInterval=setInterval,global.clearTimeout=clearTimeout,global.clearInterval=clearInterval,global.wx=wx,global.Object=Object,global.self.engineScope=this.mpJS.engineScope),this.debugger&&this.debugger.start(),this.codeBlock&&(this.mpJS.engineScope.onMessage=function(t){e.didReceivedMessage(t)},e.codeBlock(),this.flushQueueMessage()),this.started=!0)},Engine.prototype.sendMessage=function(t){var e;null!==(e=null!==window&&void 0!==window?window:global)&&void 0!==e&&e.mpDEBUG&&console.log((new Date).getTime(),"out",JSON.parse(t)),this.debugger?this.debugger.sendMessage(t):this.mpJS.engineScope.postMessage?this.mpJS.engineScope.postMessage(t):this.messageQueue.push(t)},Engine.prototype.flushQueueMessage=function(){var e=this;this.debugger||this.mpJS.engineScope.postMessage&&this.messageQueue.forEach(function(t){e.mpJS.engineScope.postMessage(t)})},Engine.prototype.didReceivedMessage=function(t){var e,o,i,n,r,s=JSON.parse(t);s&&(null!==(e=null!==window&&void 0!==window?window:global)&&void 0!==e&&e.mpDEBUG&&console.log((new Date).getTime(),"in",s),"frame_data"===s.type?this.didReceivedFrameData(s.message):"diff_data"===s.type?this.didReceivedDiffData(s.message):"element_gc"===s.type?s.message instanceof Array&&this.didReceivedElementGC(s.message):"decode_drawable"===s.type?this.drawable.decodeDrawable(s.message):"route"===s.type?null!==(n=null!==(i=null===(o=this.app)||void 0===o?void 0:o.router)&&void 0!==i?i:this.router)&&void 0!==n&&n.didReceivedRouteData(s.message):"mpjs"===s.type?this.didReceivedMPJS(s):"action:web_dialogs"===s.type?web_dialogs_1.WebDialogs.receivedWebDialogsMessage(this,s.message):"scaffold"===s.type?this.didReceivedScaffold(s.message):"rich_text"===s.type&&"doMeasure"===(null===(r=s.message)||void 0===r?void 0:r.event)?text_measurer_1.TextMeasurer.didReceivedDoMeasureData(this,s.message):"platform_view"===s.type&&this.didReceivedPlatformView(s.message))},Engine.prototype.didReceivedFrameData=function(t){var e;if(t){var o=t.routeId;if(void 0===this.managedViews[o])return this.unmanagedViewFrameData[o]||(this.unmanagedViewFrameData[o]=[]),void this.unmanagedViewFrameData[o].push(t);"number"==typeof o&&null!==(e=this.managedViews[o])&&void 0!==e&&e.didReceivedFrameData(t)}},Engine.prototype.didReceivedDiffData=function(t){var e=this;t&&t.diffs.forEach(function(t){e.componentFactory.create(t,void 0),e.componentFactory.createAncestors(t,void 0)})},Engine.prototype.didReceivedElementGC=function(t){var e=this;t.forEach(function(t){delete e.componentFactory.cachedElement[t],delete e.componentFactory.cachedView[t]})},Engine.prototype.didReceivedScaffold=function(t){var e;if("onRefreshEnd"===t.event){var o=this.componentFactory.cachedView[t.target];o&&(null!==(e=o.refreshEndResolver)&&void 0!==e&&e.call(o,void 0),o.refreshEndResolver=void 0)}},Engine.prototype.didReceivedMPJS=function(e){var o=this;this.mpJS.handleMessage(e.message,function(t){o.sendMessage(JSON.stringify({type:"mpjs",message:{requestId:e.message.requestId,result:t}}))},function(t,e){o.sendMessage(JSON.stringify({type:"mpjs",message:{funcId:t,arguments:e}}))})},Engine.prototype.didReceivedPlatformView=function(t){if("methodCall"===t.event){var e=this.componentFactory.cachedView[t.hashCode];e&&e.onMethodCall(t.method,t.params)}},Engine.prototype.listenViewport=function(){var t=this;env_1.MPEnv.platformType===env_1.PlatformType.browser&&window.addEventListener("resize",function(){t.sendViewportChangeEvent()})},Engine.prototype.sendViewportChangeEvent=function(){var o=this;this.sendViewportHandler&&clearTimeout(this.sendViewportHandler),this.sendViewportHandler=setTimeout(function(){var t,e;o.windowInfo.updateWindowInfo(),null!==(e=null===(t=o.app)||void 0===t?void 0:t.router)&&void 0!==e&&e.history.forEach(function(t){t.item.viewportChanged()}),o.sendViewportHandler=void 0},32)},Engine}();exports.Engine=Engine}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./components/basic/custom_paint":7,"./components/basic/web_dialogs":24,"./components/component_factory":25,"./debugger/debugger":36,"./env":39,"./mpjs/method_channel_handler":41,"./mpjs/mpjs":42,"./text_measurer":45,"./window_info":46}],39:[function(t,e,o){"use strict";var i,n;Object.defineProperty(o,"__esModule",{value:!0}),o.MPEnv=o.PlatformType=void 0,(n=i=o.PlatformType||(o.PlatformType={}))[n.unknown=0]="unknown",n[n.browser=1]="browser",n[n.wxMiniProgram=2]="wxMiniProgram",o.MPEnv={platformType:"undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync?i.wxMiniProgram:i.browser}},{}],40:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=t("./engine");Object.defineProperty(o,"Engine",{enumerable:!0,get:function(){return i.Engine}});var n=t("./page");Object.defineProperty(o,"Page",{enumerable:!0,get:function(){return n.Page}}),Object.defineProperty(o,"WXPage",{enumerable:!0,get:function(){return n.WXPage}});var r=t("./app");Object.defineProperty(o,"BrowserApp",{enumerable:!0,get:function(){return r.BrowserApp}}),Object.defineProperty(o,"WXApp",{enumerable:!0,get:function(){return r.WXApp}});var s=t("./components/mpkit/platform_view");Object.defineProperty(o,"MPPlatformView",{enumerable:!0,get:function(){return s.MPPlatformView}});var a=t("./components/dom_utils");Object.defineProperty(o,"setDOMAttribute",{enumerable:!0,get:function(){return a.setDOMAttribute}}),Object.defineProperty(o,"setDOMStyle",{enumerable:!0,get:function(){return a.setDOMStyle}})},{"./app":1,"./components/dom_utils":27,"./components/mpkit/platform_view":30,"./engine":38,"./page":43}],41:[function(t,e,n){(function(t){"use strict";var e=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,n)}r((l=l.apply(t,s||[])).next())})},l=this&&this.__generator||function(o,i){var n,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(o,a)}catch(t){e=[6,t],r=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.MethodChannelHandler=void 0;var c=null!==window&&void 0!==window?window:t,o=(i.installHandler=function(){c.mp_core_methodChannelHandlerWebOnly=this.handler},i.handler=function(i,n,r,s,a){return e(this,void 0,void 0,function(){var e,o;return l(this,function(t){switch(t.label){case 0:if(!Object.prototype.hasOwnProperty.call(c,i))return s("NOTIMPLEMENTED"),[2];if("function"!=typeof c[i][n])return s("NOTIMPLEMENTED"),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,c[i][n](r,a)];case 2:return e=t.sent(),s(JSON.stringify(e)),[3,4];case 3:return o=t.sent(),s("ERROR:"+o),[3,4];case 4:return[2]}})})},i);function i(){}n.MethodChannelHandler=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(t,e,i){(function(t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MPJS=void 0;var c=null!==window&&void 0!==window?window:t,e=(o.prototype.handleMessage=function(t,e,o){"callMethod"===t.event?this.callMethod(t,e,o):"getValue"===t.event?this.getValue(t,e):"setValue"===t.event?this.setValue(t,e):"hasProperty"===t.event?this.hasProperty(t,e):"deleteProperty"===t.event&&this.deleteProperty(t,e)},o.prototype.callMethod=function(t,e,o){var i,n=this,r=t.params,s=this.getCallee(r.objectHandler,r.callChain);if("object"==typeof s||"function"==typeof s)try{var a=s[r.method].apply(s,null===(i=r.args)||void 0===i?void 0:i.map(function(t){return n.wrapArgument(t,o)}));e(this.wrapResult(a))}catch(t){console.error(t)}},o.prototype.getValue=function(t,e){var o=t.params,i=this.getCallee(o.objectHandler,o.callChain);e(this.wrapResult(i[o.key]))},o.prototype.setValue=function(t,e){var o=t.params;this.getCallee(o.objectHandler,o.callChain)[o.key]=o.value,e(void 0)},o.prototype.hasProperty=function(t,e){var o=t.params,i=this.getCallee(o.objectHandler,o.callChain);e(this.wrapResult(i&&i.hasOwnProperty(o.key)))},o.prototype.deleteProperty=function(t,e){var o=t.params,i=this.getCallee(o.objectHandler,o.callChain);i&&delete i[o.key],e(1)},o.prototype.getCallee=function(t,e){var o,i,n,r,s=null!==(o=this.objectRefs[t])&&void 0!==o?o:c;"engineScope"===e[0]&&(s=this.engineScope,e.shift());for(var a=0;a<e.length;a++){var l=e[a];if(s=s[l],"document"===l&&0===a&&void 0===s&&(s=null===(r=null===(n=null===(i=this.engine)||void 0===i?void 0:i.managedViews)||void 0===n?void 0:n[0])||void 0===r?void 0:r.document),null==s)break}return s},o.prototype.wrapArgument=function(t,i){var e=this;if("string"==typeof t&&0===t.indexOf("func:")){var n=t,r=this;return function(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];t.push(r.wrapResult(o))}i(n,t)}}if("string"==typeof t&&0===t.indexOf("obj:"))return this.objectRefs[t.replace("obj:","")];if("object"==typeof t&&t instanceof Array)return t.map(function(t){return e.wrapArgument(t,i)});if("object"!=typeof t)return t;var o={};for(var s in t)o[s]=this.wrapArgument(t[s],i);return o},o.prototype.wrapResult=function(t){if("string"==typeof t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;var e=Math.random().toString();return this.objectRefs[e]=t,{objectHandler:e}},o);function o(t){this.engine=t,this.engineScope={},this.objectRefs={}}i.MPJS=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(m,t,v){(function(t){"use strict";var c=this&&this.__assign||function(){return(c=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},e=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,n)}r((l=l.apply(t,s||[])).next())})},u=this&&this.__generator||function(o,i){var n,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(o,a)}catch(t){e=[6,t],r=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(v,"__esModule",{value:!0}),v.WXPage=v.WXPageScaffoldDelegate=v.BrowserPageScaffoldDelegate=v.Page=void 0;var o=m("./components/dom_utils"),i=m("./components/mpkit/scaffold"),n=m("./env"),p=m("./router"),d=m("./text_measurer"),h=(r.prototype.ready=function(){return e(this,void 0,void 0,function(){var e=this;return u(this,function(t){return[2,new Promise(function(t){e.readyCallback=t})]})})},r.prototype.requestRoute=function(){var i,n,r,s,a,l;return e(this,void 0,void 0,function(){var e,o;return u(this,function(t){switch(t.label){case 0:return this.engine.app||(this.engine.router=new p.Router(this.engine)),e=null!==(n=null===(i=this.engine.app)||void 0===i?void 0:i.router)&&void 0!==n?n:null===(r=this.engine)||void 0===r?void 0:r.router,[4,this.fetchViewport()];case 1:return o=t.sent(),[2,e.requestRoute(null!==(a=null===(s=this.options)||void 0===s?void 0:s.route)&&void 0!==a?a:"/",null===(l=this.options)||void 0===l?void 0:l.params,this.isFirst||void 0===this.engine.app,{width:o.width,height:o.height})]}})})},r.prototype.fetchViewport=function(){return e(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return[4,this.element.getBoundingClientRect()];case 1:return(e=t.sent()).height<=.1&&(n.MPEnv.platformType===n.PlatformType.wxMiniProgram?e.height=wx.getSystemInfoSync().windowHeight:e.height=window.innerHeight),[2,e]}})})},r.prototype.dispose=function(){delete this.engine.managedViews[this.viewId]},r.prototype.viewportChanged=function(){var i,n,r;return e(this,void 0,void 0,function(){var e,o;return u(this,function(t){switch(t.label){case 0:return(e=null!==(n=null===(i=this.engine.app)||void 0===i?void 0:i.router)&&void 0!==n?n:null===(r=this.engine)||void 0===r?void 0:r.router)?[4,this.fetchViewport()]:[3,2];case 1:o=t.sent(),e.updateRoute(this.viewId,{width:o.width,height:o.height}),t.label=2;case 2:return[2]}})})},r.prototype.didReceivedFrameData=function(t){var e=this.engine.componentFactory.create(t.scaffold,this.document);e instanceof i.MPScaffold&&(this.scaffoldView!==e&&(this.scaffoldView&&(this.scaffoldView.htmlElement.remove(),this.scaffoldView.removeFromSuperview()),(this.scaffoldView=e)instanceof i.MPScaffold&&!e.delegate&&(n.MPEnv.platformType===n.PlatformType.wxMiniProgram?e.setDelegate(new l(this.document)):e.setDelegate(new s(this.document)),e.setAttributes(t.scaffold.attributes))),this.scaffoldView&&this.active&&!this.scaffoldView.attached&&(this.scaffoldView.attached=!0,this.element.appendChild(this.scaffoldView.htmlElement),o.setDOMStyle(this.scaffoldView.htmlElement,{display:"contents"})),t.overlays&&t.overlays instanceof Array&&this.setOverlays(t.overlays))},r.prototype.onRefresh=function(){return e(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this.scaffoldView instanceof i.MPScaffold?[4,this.scaffoldView.onRefresh()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},r.prototype.onReachBottom=function(){this.scaffoldView instanceof i.MPScaffold&&this.scaffoldView.onReachBottom()},r.prototype.setOverlays=function(t){var e=this;this.overlaysView.forEach(function(t){t.removeFromSuperview()});var o=t.map(function(t){return e.engine.componentFactory.create(t,e.document)}).filter(function(t){return t});o.forEach(function(t){e.document.body.appendChild(t.htmlElement)}),this.overlaysView=o},Object.defineProperty(r.prototype,"active",{get:function(){return this._active},set:function(t){var e;(this._active=t)?null!==(e=this.scaffoldView)&&void 0!==e&&e.htmlElement&&(this.element.appendChild(this.scaffoldView.htmlElement),this.scaffoldView.setAttributes(this.scaffoldView.attributes)):this.scaffoldView&&(this.scaffoldView.attached=!1,this.scaffoldView.htmlElement.remove())},enumerable:!1,configurable:!0}),r);function r(t,o,e,i){var n=this;void 0===i&&(i=null===self||void 0===self?void 0:self.document),this.element=t,this.engine=o,this.options=e,this.document=i,this._active=!0,this.viewId=-1,this.overlaysView=[],this.isFirst=!1,this.requestRoute().then(function(t){var e;n.viewId=t,o.managedViews[n.viewId]=n,o.pageMode=!0,o.unmanagedViewFrameData[n.viewId]&&(o.unmanagedViewFrameData[n.viewId].forEach(function(t){n.didReceivedFrameData(t)}),delete o.unmanagedViewFrameData[n.viewId]),null!==(e=n.readyCallback)&&void 0!==e&&e.call(n,void 0)})}v.Page=h;var s=(a.prototype.setPageTitle=function(t){this.document.title=t},a.prototype.setPageBackgroundColor=function(t){this.document.body.style.backgroundColor=t},a.prototype.setAppBarColor=function(t,e){},a);function a(t){this.document=t}v.BrowserPageScaffoldDelegate=s;var l=(f.prototype.setPageTitle=function(t){wx.setNavigationBarTitle({title:t})},f.prototype.setPageBackgroundColor=function(t){o.setDOMStyle(this.backgroundElement,{position:"fixed",width:"100vw",height:"100vh",zIndex:"-1",backgroundColor:t}),this.document.body.appendChild(this.backgroundElement),wx.setBackgroundColor({backgroundColor:t})},f.prototype.setAppBarColor=function(t,e){wx.setNavigationBarColor({backgroundColor:t,frontColor:e})},f);function f(t){this.document=t,this.backgroundElement=this.document.createElement("div")}v.WXPageScaffoldDelegate=l,v.WXPage=function(s,a,l){return void 0===a&&(a="#vdom"),void 0===l&&(l=t.app),{onLoad:function(t){var e=this.selectComponent(a).miniDom.document;d.TextMeasurer.activeTextMeasureDocument=e;var o,i=((o=l.indexPage.split("/")).pop(),o.join("/")),n=s;if(!s||t.route){var r=c({},t);delete r.route,t.route?n={route:t.route,params:r}:"/index"===(n={route:this.route.replace(i,""),params:r}).route&&(n.route="/")}null!=n&&n.route&&(n.route=decodeURIComponent(n.route)),this.mpPage=new h(e.body,l.engine,n,e),this.mpPage.isFirst=1===getCurrentPages().length},onUnload:function(){this.mpPage.viewId&&l.router.disposeRoute(this.mpPage.viewId)},onShow:function(){d.TextMeasurer.activeTextMeasureDocument=this.selectComponent(a).miniDom.document},onPullDownRefresh:function(){this.mpPage.onRefresh().then(function(t){wx.stopPullDownRefresh()})},onReachBottom:function(){this.mpPage.onReachBottom()}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./components/dom_utils":27,"./components/mpkit/scaffold":31,"./env":39,"./router":44,"./text_measurer":45}],44:[function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,n)}r((l=l.apply(t,s||[])).next())})},c=this&&this.__generator||function(o,i){var n,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(o,a)}catch(t){e=[6,t],r=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.WXRouter=o.BrowserRouter=o.Router=void 0;var r=t("./app"),s=t("./page"),a=(u.prototype.updateRoute=function(e,o){return l(this,void 0,void 0,function(){return c(this,function(t){return this.engine.sendMessage(JSON.stringify({type:"router",message:{event:"updateRoute",routeId:e,viewport:o}})),[2]})})},u.prototype.requestRoute=function(n,r,s,a){return l(this,void 0,void 0,function(){var e,o,i=this;return c(this,function(t){return this.thePushingRouteId?(e=this.thePushingRouteId,this.thePushingRouteId=void 0,this.engine.sendMessage(JSON.stringify({type:"router",message:{event:"updateRoute",routeId:e,viewport:a}})),[2,e]):(o=Math.random().toString(),[2,new Promise(function(t){i.routeResponseHandler[o]=t,i.engine.sendMessage(JSON.stringify({type:"router",message:{event:"requestRoute",requestId:o,name:n,params:null!=r?r:{},viewport:a,root:!0===s}}))})])})})},u.prototype.responseRoute=function(t){var e,o=t.requestId,i=t.routeId;null!==(e=this.routeResponseHandler[o])&&void 0!==e&&e.call(this,i)},u.prototype.disposeRoute=function(t){this.engine.sendMessage(JSON.stringify({type:"router",message:{event:"disposeRoute",routeId:t}}))},u.prototype.didReceivedRouteData=function(t){var e=t.event;"responseRoute"===e?this.responseRoute(t):"didPush"===e?this.didPush(t):"didReplace"===e?this.didReplace(t):"didPop"===e&&this.didPop()},u.prototype.didPush=function(t){throw"native implementation"},u.prototype.didReplace=function(t){throw"native implementation"},u.prototype.didPop=function(){throw"native implementation"},u);function u(t){this.engine=t,this.routeResponseHandler={}}o.Router=a;var p,d=(n(h,p=a),h.prototype.encodePath=function(t,e){var o=[];if(e)for(var i in e)o.push(i+"="+encodeURIComponent(e[i]));return this.isPathRewriteEnabled?0<o.length?t+"?"+o.join("&"):""+t:0<o.length?"?route="+encodeURIComponent(t)+"&"+o.join("&"):"?route="+encodeURIComponent(t)},h.prototype.didSetupFirst=function(t,e,o){window.history.replaceState({routeId:t},"",this.encodePath(e,o))},h.prototype.didPush=function(t){var e=t.routeId;this.thePushingRouteId=e;var o=t.name;window.history.pushState({routeId:e},"",this.encodePath(o,t.params));var i=window.pageYOffset,n=new s.Page(this.engine.app.rootElement,this.engine);this.pushHistory(n,i)},h.prototype.didReplace=function(t){var e=t.routeId;this.thePushingRouteId=e;var o=t.name;window.history.replaceState({routeId:e},"",this.encodePath(o,t.params));var i=new s.Page(this.engine.app.rootElement,this.engine);this.replaceHistory(i)},h.prototype.didPop=function(){var t=this;this.doBacking=!0,window.history.back(),this.popHistory(),setTimeout(function(){t.doBacking=!1},100)},h.prototype.pushHistory=function(t,e){this.history.forEach(function(t){return t.item.active=!1}),this.history.push({item:t,scrollPosition:e}),window.scrollTo(0,0)},h.prototype.replaceHistory=function(t){this.history.forEach(function(t){return t.item.active=!1}),this.history[this.history.length-1]={item:t,scrollPosition:0},window.scrollTo(0,0)},h.prototype.popHistory=function(){this.history.length<=1||(this.history.pop().item.active=!1,this.history[this.history.length-1].item.active=!0,window.scrollTo(0,this.history[this.history.length-1].scrollPosition))},h);function h(t){var o=p.call(this,t)||this;return o.history=[],o.isPathRewriteEnabled=!1,o.doBacking=!1,window.addEventListener("popstate",function(t){if(o.doBacking)return!0;if(window.history.state&&window.history.state.routeId){var e=window.history.state.routeId;1<o.history.length?(o.popHistory(),o.engine.sendMessage(JSON.stringify({type:"router",message:{event:"popToRoute",routeId:e}}))):o.engine.app&&o.engine.app instanceof r.BrowserApp&&o.engine.app.setupFirstPage(void 0,!0)}}),o}o.BrowserRouter=d;var f,m=(n(v,f=a),v.prototype.encodeRelativePath=function(t,e){var o=[];if(e)for(var i in e)o.push(i+"="+encodeURIComponent(e[i]));return 0<o.length?(0===t.indexOf("/")?t.substr(1):t)+"?"+o.join("&"):""+(0===t.indexOf("/")?t.substr(1):t)},v.prototype.encodeIndexPath=function(t,e){var o=[];if(e)for(var i in e)o.push(i+"="+encodeURIComponent(e[i]));return 0<o.length?"/"+this.engine.app.indexPage+"?route="+encodeURIComponent(t)+"&"+o.join("&"):"/"+this.engine.app.indexPage+"?route="+encodeURIComponent(t)+"}"},v.prototype.didPush=function(t){var e=this,o=t.routeId;this.thePushingRouteId=o;var i=t.name;wx.navigateTo({url:this.encodeRelativePath(i,t.params),fail:function(){wx.navigateTo({url:e.encodeIndexPath(i,t.params)})}})},v.prototype.didReplace=function(t){var e=this,o=t.routeId;this.thePushingRouteId=o;var i=t.name;wx.redirectTo({url:this.encodeRelativePath(i,t.params),fail:function(){wx.redirectTo({url:e.encodeIndexPath(i,t.params)})}})},v.prototype.didPop=function(){wx.navigateBack()},v);function v(){return null!==f&&f.apply(this,arguments)||this}o.WXRouter=m},{"./app":1,"./page":43}],45:[function(t,e,o){"use strict";var s=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,n)}r((l=l.apply(t,s||[])).next())})},c=this&&this.__generator||function(o,i){var n,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(o,a)}catch(t){e=[6,t],r=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TextMeasurer=void 0;var a=t("./components/component_factory"),u=t("./components/dom_utils"),p=t("./env"),i=(n.didReceivedDoMeasureData=function(n,r){return s(this,void 0,void 0,function(){var e,o,i=this;return c(this,function(t){switch(t.label){case 0:return this.activeTextMeasureDocument||(this.activeTextMeasureDocument=document),r.items?(a.ComponentFactory.disableCache=!0,e=r.items,o=e.map(function(t){return n.componentFactory.create(t,i.activeTextMeasureDocument)}).filter(function(t){return t}),a.ComponentFactory.disableCache=!1,[4,Promise.all(o.map(function(l){return s(i,void 0,void 0,function(){var e,o,i,n,r,s,a;return c(this,function(t){switch(t.label){case 0:return p.MPEnv.platformType===p.PlatformType.wxMiniProgram&&(l.htmlElement.setClass="tm"),u.setDOMStyle(l.htmlElement,{position:"fixed",top:"0px",left:"0px",opacity:"0",width:"unset",maxWidth:null!==(o=l.attributes)&&void 0!==o&&o.maxWidth&&"Infinity"!==(null===(i=l.attributes)||void 0===i?void 0:i.maxWidth)?(null===(n=l.attributes)||void 0===n?void 0:n.maxWidth)+"px":"999999px",height:"unset",maxHeight:null!==(r=l.attributes)&&void 0!==r&&r.maxHeight&&"Infinity"!==(null===(s=l.attributes)||void 0===s?void 0:s.maxHeight)?(null===(a=l.attributes)||void 0===a?void 0:a.maxHeight)+"px":"999999px"}),this.activeTextMeasureDocument.body.appendChild(l.htmlElement),p.MPEnv.platformType!==p.PlatformType.wxMiniProgram?[3,2]:[4,this.activeTextMeasureDocument.awaitSetState()];case 1:t.sent(),t.label=2;case 2:return[4,l.htmlElement.getBoundingClientRect()];case 3:return e=t.sent(),l.htmlElement.remove(),[2,{measureId:l.attributes.measureId,width:e.width,height:e.height}]}})})}))]):[3,2];case 1:t.sent().forEach(function(t){n.componentFactory.callbackTextMeasureResult(t.measureId,t)}),t.label=2;case 2:return[2]}})})},n);function n(){}o.TextMeasurer=i},{"./components/component_factory":25,"./components/dom_utils":27,"./env":39}],46:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.WindowInfo=void 0;var i=t("./env"),n=(r.prototype.updateWindowInfo=function(){i.MPEnv.platformType===i.PlatformType.wxMiniProgram?this.engine.sendMessage(JSON.stringify({type:"window_info",message:{window:{width:wx.getSystemInfoSync().screenWidth,height:wx.getSystemInfoSync().screenHeight,padding:{top:wx.getSystemInfoSync().statusBarHeight,bottom:wx.getSystemInfoSync().screenHeight-wx.getSystemInfoSync().safeArea.bottom}},devicePixelRatio:wx.getSystemInfoSync().pixelRatio}})):this.engine.sendMessage(JSON.stringify({type:"window_info",message:{window:{width:document.body.clientWidth,height:window.innerHeight,padding:{top:0,bottom:0}},devicePixelRatio:devicePixelRatio}}))},r);function r(t){this.engine=t}o.WindowInfo=n},{"./env":39}]},{},[40])(40)});
